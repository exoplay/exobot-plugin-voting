require("source-map-support").install(),require("regenerator-runtime/runtime"),function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t){e.exports=require("@exoplay/exobot")},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var a=t[o](i),s=a.value}catch(e){return void n(e)}return a.done?void e(s):Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)})}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var u=n(0);n.n(u);n.d(t,"Voting",function(){return N});var l,c,p,h,d,f,b,v,m,y,g,k,x,I,w,D,q,V,O,R,$,j,P,z,C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N=(l=n.i(u.permissionGroup)("public"),c=n.i(u.help)("Votes list - Lists all votes that are open in channel and 3 recent closed votes"),p=n.i(u.respond)(/^votes list/i),h=n.i(u.permissionGroup)("manageVotes"),d=n.i(u.help)("Votes delete quickpoll - Closes open quickpoll in channel\nVotes delete measure $id - Closes measure $id in channel"),f=n.i(u.respond)(/^votes delete\s+(quickpoll|measure)\s*(?:\$(\w{3}))?/i),b=n.i(u.permissionGroup)("public"),v=n.i(u.help)("Votes delete quickpoll - Closes open quickpoll in channel\nVotes delete measure $id - Closes measure $id in channel"),m=n.i(u.respond)(/^votes delete\s+(quickpoll|measure)\s*(?:\$(\w{3}))?/i),y=n.i(u.permissionGroup)("manageVotes"),g=n.i(u.help)("Votes close quickpoll - Closes open quickpoll in channel\nVotes close measure $id - Closes measure $id in channel"),k=n.i(u.respond)(/^votes close\s+(quickpoll|measure)\s*(?:\$(\w{3}))?/i),x=n.i(u.permissionGroup)("public"),I=n.i(u.help)("Votes close quickpoll - Closes open quickpoll in channel\nVotes close measure $id - Closes measure $id in channel"),w=n.i(u.respond)(/^votes close\s+(quickpoll|measure)\s*(?:\$(\w{3}))?/i),D=n.i(u.permissionGroup)("public"),q=n.i(u.help)("Votes results [$id] - Outputs the results of quickpoll or measure with optional $id"),V=n.i(u.respond)(/^votes results\s*(?:\$(\w{3}))?/i),O=n.i(u.permissionGroup)("createVotes"),R=n.i(u.help)('Votes create quickpoll "Your question" - Creates quickpoll in channel\nVotes create measure "Your Question"|"Option 1"|"Option 2"|[other] - Creates measure in channel with options and optional other entry\n'),$=n.i(u.respond)(/^votes create\s+(quickpoll|measure)\s+(.+)/i),j=n.i(u.permissionGroup)("public"),P=n.i(u.listen)(/^vote[^s]\s*(?:\$(\w{3})\s*)?([^\$]{1}.*)?/i),z=function(e){function t(){var n,r,a;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=i(this,e.call.apply(e,[this].concat(u))),r.name="voting",r.defaultDatabase={quickpoll:{votes:[],poll:{open:!1,channelID:"",question:"",timeout:0,userID:""}},voting:{votes:[],measures:[]}},r._requiresDatabase=!0,r.propTypes={},a=n,i(r,a)}return a(t,e),t.prototype.listVotes=function(){function e(e,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n){var r,o,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.databaseInitialized();case 2:if(r=[],o=[],i=this.bot.db.get("quickpoll.poll").value(),a=0,i.open===!0&&i.channelID===n.channel.id&&(r.push("Open quickpoll: "+i.question+"\n"),a++),r.push("Open Polls:"),this.bot.db.get("voting.measures").filter({channelID:n.channel.id}).forEach(function(e){var t=("000"+e.id.toString(36)).slice(-3);e.open?(a++,r.push("Measure $"+t+": "+e.text)):(a++,o.push("Measure $"+t+": "+e.text))}).value(),s=o.slice(o.length-3).join("\n"),!(a>0)){e.next=12;break}return e.abrupt("return",r.join("\n")+"\n\nClosed Polls:\n"+s);case 12:return e.abrupt("return","No quickpolls or measures found in this channel");case 13:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.deleteVoteAdmin=function(){function e(e,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n){var r,o,i=t[1],a=t[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.databaseInitialized();case 2:if("quickpoll"!==i){e.next=6;break}if(r=this.bot.db.get("quickpoll.poll").value(),r.userID===n.user.id){e.next=6;break}return e.abrupt("return",this.deleteVote(i,a,n));case 6:if(o=this.bot.db.get("voting.measures").filter({id:parseInt(a,36),channelID:n.channel.id}).first().value(),o.channelID!==n.channel.id||o.userID===n.user.id){e.next=9;break}return e.abrupt("return",this.deleteVote(i,a,n));case 9:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.deleteVoteOwned=function(){function e(e,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n){var r,o,i=t[1],a=t[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.databaseInitialized();case 2:if("quickpoll"!==i){e.next=6;break}if(r=this.bot.db.get("quickpoll.poll").value(),r.userID!==n.user.id||r.channelID!==n.channel.id){e.next=6;break}return e.abrupt("return",this.deleteVote(i,a,n));case 6:if(o=this.bot.db.get("voting.measures").filter({id:parseInt(a,36),channelID:n.channel.id}).first().value(),o.channelID!==n.channel.id||o.userID!==n.user.id){e.next=9;break}return e.abrupt("return",this.deleteVote(i,a,n));case 9:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.deleteVote=function(){function e(e,n,r){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n,r){var o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("quickpoll"!==t){e.next=6;break}if(o=this.bot.db.get("quickpoll.poll").value(),o.channelID!==r.channel.id){e.next=5;break}return this.initQuickpoll(),e.abrupt("return","Quickpoll has been deleted.");case 5:return e.abrupt("return","No quickpoll open in this channel.");case 6:return i=parseInt(n,36),this.bot.db.get("voting.measures").remove(function(e){return e.id===i}).value(),this.bot.db.get("voting.votes").remove(function(e){return e.measureID===i}).value(),e.abrupt("return","Measure "+n+" deleted.");case 10:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.closeVoteAdmin=function(){function e(e,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n){var r,o,i=t[1],a=t[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.databaseInitialized();case 2:if("quickpoll"!==i){e.next=6;break}if(r=this.bot.db.get("quickpoll.poll").value(),r.userID===n.user.id||r.channelID!==n.channel.id){e.next=6;break}return e.abrupt("return",this.closeVote(i,a,n));case 6:if(o=this.bot.db.get("voting.measures").filter({id:parseInt(a,36),channelID:n.channel.id}).first().value(),o.channelID!==n.channel.id||o.userID===n.user.id){e.next=9;break}return e.abrupt("return",this.closeVote(i,a,n));case 9:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.closeVoteOwned=function(){function e(e,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n){var r,o,i=t[1],a=t[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.databaseInitialized();case 2:if("quickpoll"!==i){e.next=6;break}if(r=this.bot.db.get("quickpoll.poll").value(),r.userID!==n.user.id||r.channelID!==n.channel.id){e.next=6;break}return e.abrupt("return",this.closeVote(i,a,n));case 6:if(o=this.bot.db.get("voting.measures").filter({id:parseInt(a,36),channelID:n.channel.id}).first().value(),o.channelID!==n.channel.id||o.userID!==n.user.id){e.next=9;break}return e.abrupt("return",this.closeVote(i,a,n));case 9:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.closeVote=function(){function e(e,n,r){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n,r){var o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("quickpoll"!==t){e.next=6;break}if(o=this.bot.db.get("quickpoll.poll").value(),o.open!==!0||o.channelID!==r.channel.id){e.next=5;break}return this.bot.db.set("quickpoll.poll.open",!1).value(),e.abrupt("return",'Poll "'+o.question+'" has been closed.');case 5:return e.abrupt("return","No quickpoll open in this channel.");case 6:if(i=this.bot.db.get("voting.measures").filter({id:parseInt(n,36),channelID:r.channel.id}).first().value(),i.open!==!0||i.channelID!==r.channel.id){e.next=10;break}return i.open=!1,e.abrupt("return",'Measure "'+i.text+'" has been closed.');case 10:return e.abrupt("return","No vote with that ID open in this channel");case 11:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.results=function(){function e(e,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n){var r,o,i,a,s,u,l,c=t[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,o=[],i=void 0,e.next=5,this.databaseInitialized();case 5:if(!c){e.next=11;break}a=parseInt(c,36),s=this.bot.db.get("voting.measures").filter({id:a,channelID:n.channel.id}).first().value(),s&&(r=this.bot.db.get("voting.votes").filter({measureID:a,channelID:n.channel.id}).countBy(function(e){return e.response}).value(),i="Voting results for $"+c+" "+s.text+":\n"),e.next=16;break;case 11:if(u=this.bot.db.get("quickpoll.poll").value(),u.channelID===n.channel.id){e.next=14;break}return e.abrupt("return","No Quickpoll running for "+n.channel.name);case 14:r=this.bot.db.get("quickpoll.votes").filter({channelID:n.channel.id}).countBy(function(e){return e.response}).value(),i='Voting results for "'+u.question+'":\n';case 16:if(0!==Object.keys(r).length){e.next=18;break}return e.abrupt("return","No votes yet");case 18:for(l in r)r.hasOwnProperty(l)&&o.push({key:l,value:r[l]});return o.length>1&&o.sort(function(e,t){return t.value-e.value}),o.forEach(function(e){i+=e.key+" recieved "+e.value+" point"+(1===e.value?"":"s")+"\n"}),e.abrupt("return",i);case 22:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.createVote=function(){function e(e,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n){var r,o,i,a,s,u=t[1],l=t[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.databaseInitialized();case 2:if("quickpoll"!==u){e.next=7;break}if(this.bot.db.get("quickpoll.poll.open").value()!==!1){e.next=6;break}return this.initQuickpoll(!0,n.channel.id,n.user.id,l),e.abrupt("return","Quickpoll created: "+l+' type "vote <your vote>" to respond.');case 6:return e.abrupt("return","Cannot create quickpoll.  Quickpoll already in progress.");case 7:return r=l.split("|"),o={id:this.getNextMeasureID(),text:r[0],choices:r.slice(1),allowOther:r.includes("other"),open:!0,timeout:0,channelID:n.channel.id,userID:n.user.id},i=("000"+o.id.toString(36)).slice(-3),this.bot.db.get("voting.measures").push(o).value(),a="Measure created: "+o.text+" Choices:\n",s=0,o.choices.forEach(function(e){"other"!==e&&(a+=++s+".\t"+e+"\n")}),a+='Type "vote $'+i+" 1-"+s+'"',a+=""+(o.allowOther?' or "vote $'+i+' <your vote>" ':" "),a+="to place your vote.",e.abrupt("return",a);case 18:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.vote=function(){function e(e,n){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n){var r,o,i,a,s,u,l,c,p,h,d=this,f=(t[0],t[1]),b=t[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.databaseInitialized();case 2:if(!f||!b){e.next=29;break}if(r=parseInt(b)-1,o=parseInt(f,36),i=void 0,a=this.bot.db.get("voting.measures").filter({id:o,open:!0,channelID:n.channel.id}).first().value(),!a){e.next=26;break}if(s=a.choices.length-(a.allowOther?2:1),isNaN(r)){e.next=17;break}if(!(r>=0&&r<=s)){e.next=14;break}i=a.choices[r],e.next=15;break;case 14:return e.abrupt("return","Invaid vote option "+b);case 15:e.next=22;break;case 17:if(!a.allowOther){e.next=21;break}i=b,e.next=22;break;case 21:return e.abrupt("return","Invalid vote option "+b);case 22:u=this.buildVote(!1,o,i,n.user.id,n.channel.id),this.bot.db.get("voting.votes").push(u).value(),e.next=27;break;case 26:return e.abrupt("return","No vote with that ID open in this channel");case 27:e.next=42;break;case 29:if(!b){e.next=34;break}l=this.bot.db.get("quickpoll.poll").value(),l.open===!0&&l.channelID===n.channel.id&&(c=this.buildVote(!0,"",b,n.user.id,n.channel.id),this.bot.db.get("quickpoll.votes").push(c).value()),e.next=42;break;case 34:if(!f){e.next=38;break}if(p=function(){var e=d.bot.db.get("voting.measures").filter({id:parseInt(f,36),open:!0,channelID:n.channel.id}).first().value(),t=("000"+e.id.toString(36)).slice(-3),r="Measure: "+e.text+" Choices:\n",o=1;return e.choices.forEach(function(e){"other"!==e&&(r+=o++ +".\t"+e+"\n")}),r+='Type "vote $'+t+" 1-"+(o-1)+'""',e.allowOther&&(r+=' or "vote $'+t+' <your vote>"'),r+=" to place your vote.",{v:r}}(),"object"!==("undefined"==typeof p?"undefined":C(p))){e.next=38;break}return e.abrupt("return",p.v);case 38:if(h=this.bot.db.get("quickpoll.poll").value(),h.channelID===n.channel.id&&h.open){e.next=41;break}return e.abrupt("return","No Quickpoll running for "+n.channel.name);case 41:return e.abrupt("return","Quickpoll: "+h.question+' type "vote your response" to respond.');case 42:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.buildVote=function(e,t,n,r,o){return e?{response:n,user:r,timestamp:Date.now(),channelID:o}:{measureID:t,response:n,user:r,timestamp:Date.now(),channelID:o}},t.prototype.getNextMeasureID=function(){var e=this.bot.db.get("voting.measures").maxBy("id").value();return e?e.id+1:1},t.prototype.initVoting=function(){function e(){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.databaseInitialized();case 2:this.bot.db.get("voting").value(),t=this.bot.db.get("voting.votes").first().value(),n=this.bot.db.get("voting.measures").first().value(),"undefined"==typeof t&&this.bot.db.set("voting.votes",[]).value(),"undefined"==typeof n&&this.bot.db.set("voting.measures",[]).value();case 7:case"end":return e.stop()}},e,this)}));return e}(),t.prototype.initQuickpoll=function(){function e(e,n,r,o,i){return t.apply(this,arguments)}var t=r(regeneratorRuntime.mark(function e(t,n,r,o,i){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.databaseInitialized();case 2:a={open:t||!1,channelID:n||"",question:o||"",timeout:i||0,userID:r||""},this.bot.db.set("quickpoll.poll",a).value(),this.bot.db.set("quickpoll.votes",[]).value();case 5:case"end":return e.stop()}},e,this)}));return e}(),t}(u.ChatPlugin),s(z.prototype,"listVotes",[l,c,p],Object.getOwnPropertyDescriptor(z.prototype,"listVotes"),z.prototype),s(z.prototype,"deleteVoteAdmin",[h,d,f],Object.getOwnPropertyDescriptor(z.prototype,"deleteVoteAdmin"),z.prototype),s(z.prototype,"deleteVoteOwned",[b,v,m],Object.getOwnPropertyDescriptor(z.prototype,"deleteVoteOwned"),z.prototype),s(z.prototype,"closeVoteAdmin",[y,g,k],Object.getOwnPropertyDescriptor(z.prototype,"closeVoteAdmin"),z.prototype),s(z.prototype,"closeVoteOwned",[x,I,w],Object.getOwnPropertyDescriptor(z.prototype,"closeVoteOwned"),z.prototype),s(z.prototype,"results",[D,q,V],Object.getOwnPropertyDescriptor(z.prototype,"results"),z.prototype),s(z.prototype,"createVote",[O,R,$],Object.getOwnPropertyDescriptor(z.prototype,"createVote"),z.prototype),s(z.prototype,"vote",[j,P],Object.getOwnPropertyDescriptor(z.prototype,"vote"),z.prototype),z)}]));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdm90aW5nLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA5MjVjZTMxNTg2MjU0MTAxMzVkNSIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJAZXhvcGxheS9leG9ib3RcIiIsIndlYnBhY2s6Ly8vLi92b3RpbmcuanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImluc3RhbGwiLCJlIiwiYSIsImkiLCJleHBvcnRzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJtb2R1bGUiLCJsIiwiY2FsbCIsIm0iLCJjIiwidmFsdWUiLCJkIiwibmFtZSIsImdldHRlciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwibyIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9hc3luY1RvR2VuZXJhdG9yIiwiZm4iLCJnZW4iLCJhcHBseSIsInRoaXMiLCJhcmd1bWVudHMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInN0ZXAiLCJrZXkiLCJhcmciLCJpbmZvIiwiZXJyb3IiLCJkb25lIiwidGhlbiIsImVyciIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsImNvbnN0cnVjdG9yIiwid3JpdGFibGUiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIl9hcHBseURlY29yYXRlZERlc2NyaXB0b3IiLCJ0YXJnZXQiLCJkZWNvcmF0b3JzIiwiZGVzY3JpcHRvciIsImNvbnRleHQiLCJkZXNjIiwiZm9yRWFjaCIsImluaXRpYWxpemVyIiwic2xpY2UiLCJyZXZlcnNlIiwicmVkdWNlIiwiZGVjb3JhdG9yIiwidW5kZWZpbmVkIiwiX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19leG9wbGF5X2V4b2JvdF9fIiwiVm90aW5nIiwiX2RlYyIsIl9kZWMyIiwiX2RlYzMiLCJfZGVjNCIsIl9kZWM1IiwiX2RlYzYiLCJfZGVjNyIsIl9kZWM4IiwiX2RlYzkiLCJfZGVjMTAiLCJfZGVjMTEiLCJfZGVjMTIiLCJfZGVjMTMiLCJfZGVjMTQiLCJfZGVjMTUiLCJfZGVjMTYiLCJfZGVjMTciLCJfZGVjMTgiLCJfZGVjMTkiLCJfZGVjMjAiLCJfZGVjMjEiLCJfZGVjMjIiLCJfZGVjMjMiLCJfY2xhc3MiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJvYmoiLCJfQ2hhdFBsdWdpbiIsIl90ZW1wIiwiX3RoaXMiLCJfcmV0IiwiX2xlbiIsImxlbmd0aCIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJjb25jYXQiLCJkZWZhdWx0RGF0YWJhc2UiLCJxdWlja3BvbGwiLCJ2b3RlcyIsInBvbGwiLCJvcGVuIiwiY2hhbm5lbElEIiwicXVlc3Rpb24iLCJ0aW1lb3V0IiwidXNlcklEIiwidm90aW5nIiwibWVhc3VyZXMiLCJfcmVxdWlyZXNEYXRhYmFzZSIsInByb3BUeXBlcyIsImxpc3RWb3RlcyIsIl94IiwiX3gyIiwiX3JlZiIsInJlZ2VuZXJhdG9yUnVudGltZSIsIm1hcmsiLCJfY2FsbGVlIiwibWF0Y2giLCJtZXNzYWdlIiwidm90ZUxpc3QiLCJjbG9zZWRMaXN0IiwiY3VycmVudFBvbGwiLCJwb2xsQ291bnQiLCJjbG9zZWRUZXh0Iiwid3JhcCIsIl9jb250ZXh0IiwicHJldiIsIm5leHQiLCJkYXRhYmFzZUluaXRpYWxpemVkIiwiYm90IiwiZGIiLCJjaGFubmVsIiwiaWQiLCJwdXNoIiwiZmlsdGVyIiwibWVhc3VyZUlEU3RyaW5nIiwidG9TdHJpbmciLCJ0ZXh0Iiwiam9pbiIsImFicnVwdCIsInN0b3AiLCJkZWxldGVWb3RlQWRtaW4iLCJfeDMiLCJfeDQiLCJfcmVmMiIsIl9jYWxsZWUyIiwiX3JlZjMiLCJfc2VsZWN0ZWRQb2xsIiwic2VsZWN0ZWRQb2xsIiwidHlwZSIsIl9jb250ZXh0MiIsInVzZXIiLCJkZWxldGVWb3RlIiwicGFyc2VJbnQiLCJmaXJzdCIsImRlbGV0ZVZvdGVPd25lZCIsIl94NSIsIl94NiIsIl9yZWY0IiwiX2NhbGxlZTMiLCJfcmVmNSIsIl9zZWxQb2xsIiwic2VsUG9sbCIsIl9jb250ZXh0MyIsIl94NyIsIl94OCIsIl94OSIsIl9yZWY2IiwiX2NhbGxlZTQiLCJtZWFzdXJlSUQiLCJfY29udGV4dDQiLCJpbml0UXVpY2twb2xsIiwicmVtb3ZlIiwiY2xvc2VWb3RlQWRtaW4iLCJfeDEwIiwiX3gxMSIsIl9yZWY3IiwiX2NhbGxlZTUiLCJfcmVmOCIsIl9zZWxQb2xsMiIsIl9jb250ZXh0NSIsImNsb3NlVm90ZSIsImNsb3NlVm90ZU93bmVkIiwiX3gxMiIsIl94MTMiLCJfcmVmOSIsIl9jYWxsZWU2IiwiX3JlZjEwIiwiX3NlbFBvbGwzIiwiX2NvbnRleHQ2IiwiX3gxNCIsIl94MTUiLCJfeDE2IiwiX3JlZjExIiwiX2NhbGxlZTciLCJjdXJyZW50TWVhc3VyZSIsIl9jb250ZXh0NyIsInNldCIsInJlc3VsdHMiLCJfeDE3IiwiX3gxOCIsIl9yZWYxMiIsIl9jYWxsZWU4IiwiX3JlZjEzIiwicmVzdWx0c1NvcnRlZCIsInJlc3BvbnNlIiwibWVhc3VyZU51bSIsImsiLCJfY29udGV4dDgiLCJjb3VudEJ5Iiwia2V5cyIsInNvcnQiLCJiIiwidmFsIiwiY3JlYXRlVm90ZSIsIl94MTkiLCJfeDIwIiwiX3JlZjE0IiwiX2NhbGxlZTkiLCJfcmVmMTUiLCJtZWFzdXJlRGV0YWlscyIsIm1lYXN1cmUiLCJtZWFzdXJlVGV4dCIsImNob2ljZU51bSIsInBvbGxUZXh0IiwiX2NvbnRleHQ5Iiwic3BsaXQiLCJnZXROZXh0TWVhc3VyZUlEIiwiY2hvaWNlcyIsImFsbG93T3RoZXIiLCJpbmNsdWRlcyIsImNob2ljZSIsInZvdGUiLCJfeDIxIiwiX3gyMiIsIl9yZWYxNiIsIl9jYWxsZWUxMCIsIl9yZWYxNyIsInJlc3BvbnNlTnVtIiwicmVzcG9uc2VUZXh0IiwibWF4Q2hvaWNlIiwiX3ZvdGUiLCJfdm90ZTIiLCJfcmV0MiIsIl9jdXJyZW50UG9sbCIsIl90aGlzMiIsInZvdGVUZXh0IiwiX2NvbnRleHQxMCIsImlzTmFOIiwiYnVpbGRWb3RlIiwidiIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJoaWdoTWVhc3VyZSIsIm1heEJ5IiwiaW5pdFZvdGluZyIsIl9yZWYxOCIsIl9jYWxsZWUxMSIsIm1lYXN1cmVMaXN0IiwiX2NvbnRleHQxMSIsIl94MjMiLCJfeDI0IiwiX3gyNSIsIl94MjYiLCJfeDI3IiwiX3JlZjE5IiwiX2NhbGxlZTEyIiwicG9sbFN0YXRlIiwicXVlc3Rpb250ZXh0IiwicG9sbHRpbWVvdXQiLCJwb2xsT3B0aW9ucyIsIl9jb250ZXh0MTIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFRLHNCQUFzQkMsVUFBVUQsUUFBUSwrQkFDL0MsU0FBU0UsRUFBR0MsR0FBSyxJQUFJLEdBQUlDLEtBQUtELEdBQUdELEVBQUVFLEdBQUtELEVBQUVDLElBQU1DLFFBQWtCLFNBQVVDLEdDRzdFLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBSCxPQUdBLElBQUFLLEdBQUFELEVBQUFELElBQ0FKLEVBQUFJLEVBQ0FHLEdBQUEsRUFDQU4sV0FVQSxPQU5BQyxHQUFBRSxHQUFBSSxLQUFBRixFQUFBTCxRQUFBSyxJQUFBTCxRQUFBRSxHQUdBRyxFQUFBQyxHQUFBLEVBR0FELEVBQUFMLFFBdkJBLEdBQUFJLEtBNkRBLE9BakNBRixHQUFBTSxFQUFBUCxFQUdBQyxFQUFBTyxFQUFBTCxFQUdBRixFQUFBSCxFQUFBLFNBQUFXLEdBQTJDLE1BQUFBLElBRzNDUixFQUFBUyxF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RUFBQUMsRUFBQUMsR0FBQTNFLE9BQUFtUix5QkFBQS9MLEVBQUExRSxVQUFBLGtCQUFBMEUsRUFBQTFFLFdBQUFvQyxFQUFBc0MsRUFBQTFFLFVBQUEsV0FBQWtFLEVBQUFDLEVBQUFDLEdBQUE5RSxPQUFBbVIseUJBQUEvTCxFQUFBMUUsVUFBQSxXQUFBMEUsRUFBQTFFLFdBQUFvQyxFQUFBc0MsRUFBQTFFLFVBQUEsY0FBQXFFLEVBQUFDLEVBQUFDLEdBQUFqRixPQUFBbVIseUJBQUEvTCxFQUFBMUUsVUFBQSxjQUFBMEUsRUFBQTFFLFdBQUFvQyxFQUFBc0MsRUFBQTFFLFVBQUEsUUFBQXdFLEVBQUFDLEdBQUFuRixPQUFBbVIseUJBQUEvTCxFQUFBMUUsVUFBQSxRQUFBMEUsRUFBQTFFLFdBQUEwRSIsImZpbGUiOiJ2b3RpbmcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKFwic291cmNlLW1hcC1zdXBwb3J0XCIpLmluc3RhbGwoKTtyZXF1aXJlKFwicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lXCIpO1xuKGZ1bmN0aW9uKGUsIGEpIHsgZm9yKHZhciBpIGluIGEpIGVbaV0gPSBhW2ldOyB9KGV4cG9ydHMsIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9yeSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb3J5IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHR9KTtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJAZXhvcGxheS9leG9ib3RcIik7XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19leG9wbGF5X2V4b2JvdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2V4b3BsYXlfZXhvYm90X19fZGVmYXVsdCA9IF9fd2VicGFja19yZXF1aXJlX18ubihfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2V4b3BsYXlfZXhvYm90X18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChleHBvcnRzLCBcIlZvdGluZ1wiLCBmdW5jdGlvbigpIHsgcmV0dXJuIFZvdGluZzsgfSk7XG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZGVjLCBfZGVjMiwgX2RlYzMsIF9kZWM0LCBfZGVjNSwgX2RlYzYsIF9kZWM3LCBfZGVjOCwgX2RlYzksIF9kZWMxMCwgX2RlYzExLCBfZGVjMTIsIF9kZWMxMywgX2RlYzE0LCBfZGVjMTUsIF9kZWMxNiwgX2RlYzE3LCBfZGVjMTgsIF9kZWMxOSwgX2RlYzIwLCBfZGVjMjEsIF9kZWMyMiwgX2RlYzIzLCBfZGVzYywgX3ZhbHVlLCBfY2xhc3M7XG5cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBnZW4gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyBmdW5jdGlvbiBzdGVwKGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7IHN0ZXAoXCJuZXh0XCIsIHZhbHVlKTsgfSwgZnVuY3Rpb24gKGVycikgeyBzdGVwKFwidGhyb3dcIiwgZXJyKTsgfSk7IH0gfSByZXR1cm4gc3RlcChcIm5leHRcIik7IH0pOyB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuZnVuY3Rpb24gX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcih0YXJnZXQsIHByb3BlcnR5LCBkZWNvcmF0b3JzLCBkZXNjcmlwdG9yLCBjb250ZXh0KSB7XG4gIHZhciBkZXNjID0ge307XG4gIE9iamVjdFsna2UnICsgJ3lzJ10oZGVzY3JpcHRvcikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgZGVzY1trZXldID0gZGVzY3JpcHRvcltrZXldO1xuICB9KTtcbiAgZGVzYy5lbnVtZXJhYmxlID0gISFkZXNjLmVudW1lcmFibGU7XG4gIGRlc2MuY29uZmlndXJhYmxlID0gISFkZXNjLmNvbmZpZ3VyYWJsZTtcblxuICBpZiAoJ3ZhbHVlJyBpbiBkZXNjIHx8IGRlc2MuaW5pdGlhbGl6ZXIpIHtcbiAgICBkZXNjLndyaXRhYmxlID0gdHJ1ZTtcbiAgfVxuXG4gIGRlc2MgPSBkZWNvcmF0b3JzLnNsaWNlKCkucmV2ZXJzZSgpLnJlZHVjZShmdW5jdGlvbiAoZGVzYywgZGVjb3JhdG9yKSB7XG4gICAgcmV0dXJuIGRlY29yYXRvcih0YXJnZXQsIHByb3BlcnR5LCBkZXNjKSB8fCBkZXNjO1xuICB9LCBkZXNjKTtcblxuICBpZiAoY29udGV4dCAmJiBkZXNjLmluaXRpYWxpemVyICE9PSB2b2lkIDApIHtcbiAgICBkZXNjLnZhbHVlID0gZGVzYy5pbml0aWFsaXplciA/IGRlc2MuaW5pdGlhbGl6ZXIuY2FsbChjb250ZXh0KSA6IHZvaWQgMDtcbiAgICBkZXNjLmluaXRpYWxpemVyID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKGRlc2MuaW5pdGlhbGl6ZXIgPT09IHZvaWQgMCkge1xuICAgIE9iamVjdFsnZGVmaW5lJyArICdQcm9wZXJ0eSddKHRhcmdldCwgcHJvcGVydHksIGRlc2MpO1xuICAgIGRlc2MgPSBudWxsO1xuICB9XG5cbiAgcmV0dXJuIGRlc2M7XG59XG5cblxuXG52YXIgVm90aW5nID0gKF9kZWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19leG9wbGF5X2V4b2JvdF9fW1wicGVybWlzc2lvbkdyb3VwXCJdKSgncHVibGljJyksIF9kZWMyID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fZXhvcGxheV9leG9ib3RfX1tcImhlbHBcIl0pKCdWb3RlcyBsaXN0IC0gTGlzdHMgYWxsIHZvdGVzIHRoYXQgYXJlIG9wZW4gaW4gY2hhbm5lbCBhbmQgMyByZWNlbnQgY2xvc2VkIHZvdGVzJyksIF9kZWMzID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fZXhvcGxheV9leG9ib3RfX1tcInJlc3BvbmRcIl0pKC9edm90ZXMgbGlzdC9pKSwgX2RlYzQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19leG9wbGF5X2V4b2JvdF9fW1wicGVybWlzc2lvbkdyb3VwXCJdKSgnbWFuYWdlVm90ZXMnKSwgX2RlYzUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19leG9wbGF5X2V4b2JvdF9fW1wiaGVscFwiXSkoJ1ZvdGVzIGRlbGV0ZSBxdWlja3BvbGwgLSBDbG9zZXMgb3BlbiBxdWlja3BvbGwgaW4gY2hhbm5lbFxcbicgKyAnVm90ZXMgZGVsZXRlIG1lYXN1cmUgJGlkIC0gQ2xvc2VzIG1lYXN1cmUgJGlkIGluIGNoYW5uZWwnKSwgX2RlYzYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19leG9wbGF5X2V4b2JvdF9fW1wicmVzcG9uZFwiXSkoL152b3RlcyBkZWxldGVcXHMrKHF1aWNrcG9sbHxtZWFzdXJlKVxccyooPzpcXCQoXFx3ezN9KSk/L2kpLCBfZGVjNyA9IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2V4b3BsYXlfZXhvYm90X19bXCJwZXJtaXNzaW9uR3JvdXBcIl0pKCdwdWJsaWMnKSwgX2RlYzggPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19leG9wbGF5X2V4b2JvdF9fW1wiaGVscFwiXSkoJ1ZvdGVzIGRlbGV0ZSBxdWlja3BvbGwgLSBDbG9zZXMgb3BlbiBxdWlja3BvbGwgaW4gY2hhbm5lbFxcbicgKyAnVm90ZXMgZGVsZXRlIG1lYXN1cmUgJGlkIC0gQ2xvc2VzIG1lYXN1cmUgJGlkIGluIGNoYW5uZWwnKSwgX2RlYzkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19leG9wbGF5X2V4b2JvdF9fW1wicmVzcG9uZFwiXSkoL152b3RlcyBkZWxldGVcXHMrKHF1aWNrcG9sbHxtZWFzdXJlKVxccyooPzpcXCQoXFx3ezN9KSk/L2kpLCBfZGVjMTAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19leG9wbGF5X2V4b2JvdF9fW1wicGVybWlzc2lvbkdyb3VwXCJdKSgnbWFuYWdlVm90ZXMnKSwgX2RlYzExID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fZXhvcGxheV9leG9ib3RfX1tcImhlbHBcIl0pKCdWb3RlcyBjbG9zZSBxdWlja3BvbGwgLSBDbG9zZXMgb3BlbiBxdWlja3BvbGwgaW4gY2hhbm5lbFxcbicgKyAnVm90ZXMgY2xvc2UgbWVhc3VyZSAkaWQgLSBDbG9zZXMgbWVhc3VyZSAkaWQgaW4gY2hhbm5lbCcpLCBfZGVjMTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19leG9wbGF5X2V4b2JvdF9fW1wicmVzcG9uZFwiXSkoL152b3RlcyBjbG9zZVxccysocXVpY2twb2xsfG1lYXN1cmUpXFxzKig/OlxcJChcXHd7M30pKT8vaSksIF9kZWMxMyA9IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2V4b3BsYXlfZXhvYm90X19bXCJwZXJtaXNzaW9uR3JvdXBcIl0pKCdwdWJsaWMnKSwgX2RlYzE0ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fZXhvcGxheV9leG9ib3RfX1tcImhlbHBcIl0pKCdWb3RlcyBjbG9zZSBxdWlja3BvbGwgLSBDbG9zZXMgb3BlbiBxdWlja3BvbGwgaW4gY2hhbm5lbFxcbicgKyAnVm90ZXMgY2xvc2UgbWVhc3VyZSAkaWQgLSBDbG9zZXMgbWVhc3VyZSAkaWQgaW4gY2hhbm5lbCcpLCBfZGVjMTUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19leG9wbGF5X2V4b2JvdF9fW1wicmVzcG9uZFwiXSkoL152b3RlcyBjbG9zZVxccysocXVpY2twb2xsfG1lYXN1cmUpXFxzKig/OlxcJChcXHd7M30pKT8vaSksIF9kZWMxNiA9IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2V4b3BsYXlfZXhvYm90X19bXCJwZXJtaXNzaW9uR3JvdXBcIl0pKCdwdWJsaWMnKSwgX2RlYzE3ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fZXhvcGxheV9leG9ib3RfX1tcImhlbHBcIl0pKCdWb3RlcyByZXN1bHRzIFskaWRdIC0gT3V0cHV0cyB0aGUgcmVzdWx0cyBvZiBxdWlja3BvbGwgb3IgbWVhc3VyZSB3aXRoIG9wdGlvbmFsICRpZCcpLCBfZGVjMTggPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19leG9wbGF5X2V4b2JvdF9fW1wicmVzcG9uZFwiXSkoL152b3RlcyByZXN1bHRzXFxzKig/OlxcJChcXHd7M30pKT8vaSksIF9kZWMxOSA9IF9fd2VicGFja19yZXF1aXJlX18uaShfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX2V4b3BsYXlfZXhvYm90X19bXCJwZXJtaXNzaW9uR3JvdXBcIl0pKCdjcmVhdGVWb3RlcycpLCBfZGVjMjAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19leG9wbGF5X2V4b2JvdF9fW1wiaGVscFwiXSkoJ1ZvdGVzIGNyZWF0ZSBxdWlja3BvbGwgXCJZb3VyIHF1ZXN0aW9uXCIgLSBDcmVhdGVzIHF1aWNrcG9sbCBpbiBjaGFubmVsXFxuJyArICdWb3RlcyBjcmVhdGUgbWVhc3VyZSBcIllvdXIgUXVlc3Rpb25cInxcIk9wdGlvbiAxXCJ8XCJPcHRpb24gMlwifFtvdGhlcl0gLSAnICsgJ0NyZWF0ZXMgbWVhc3VyZSBpbiBjaGFubmVsIHdpdGggb3B0aW9ucyBhbmQgb3B0aW9uYWwgb3RoZXIgZW50cnlcXG4nKSwgX2RlYzIxID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fZXhvcGxheV9leG9ib3RfX1tcInJlc3BvbmRcIl0pKC9edm90ZXMgY3JlYXRlXFxzKyhxdWlja3BvbGx8bWVhc3VyZSlcXHMrKC4rKS9pKSwgX2RlYzIyID0gX193ZWJwYWNrX3JlcXVpcmVfXy5pKF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fZXhvcGxheV9leG9ib3RfX1tcInBlcm1pc3Npb25Hcm91cFwiXSkoJ3B1YmxpYycpLCBfZGVjMjMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmkoX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19leG9wbGF5X2V4b2JvdF9fW1wibGlzdGVuXCJdKSgvXnZvdGVbXnNdXFxzKig/OlxcJChcXHd7M30pXFxzKik/KFteXFwkXXsxfS4qKT8vaSksIChfY2xhc3MgPSBmdW5jdGlvbiAoX0NoYXRQbHVnaW4pIHtcbiAgX2luaGVyaXRzKFZvdGluZywgX0NoYXRQbHVnaW4pO1xuXG4gIGZ1bmN0aW9uIFZvdGluZygpIHtcbiAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZvdGluZyk7XG5cbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX3JldCA9IChfdGVtcCA9IChfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9DaGF0UGx1Z2luLmNhbGwuYXBwbHkoX0NoYXRQbHVnaW4sIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5uYW1lID0gJ3ZvdGluZycsIF90aGlzLmRlZmF1bHREYXRhYmFzZSA9IHtcbiAgICAgIHF1aWNrcG9sbDogeyB2b3RlczogW10sIHBvbGw6IHtcbiAgICAgICAgICBvcGVuOiBmYWxzZSxcbiAgICAgICAgICBjaGFubmVsSUQ6ICcnLFxuICAgICAgICAgIHF1ZXN0aW9uOiAnJyxcbiAgICAgICAgICB0aW1lb3V0OiAwLFxuICAgICAgICAgIHVzZXJJRDogJydcbiAgICAgICAgfSB9LFxuICAgICAgdm90aW5nOiB7IHZvdGVzOiBbXSwgbWVhc3VyZXM6IFtdIH1cbiAgICB9LCBfdGhpcy5fcmVxdWlyZXNEYXRhYmFzZSA9IHRydWUsIF90aGlzLnByb3BUeXBlcyA9IHt9LCBfdGVtcCksIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcbiAgfVxuXG4gIFZvdGluZy5wcm90b3R5cGUubGlzdFZvdGVzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShtYXRjaCwgbWVzc2FnZSkge1xuICAgICAgdmFyIHZvdGVMaXN0LCBjbG9zZWRMaXN0LCBjdXJyZW50UG9sbCwgcG9sbENvdW50LCBjbG9zZWRUZXh0O1xuICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2VJbml0aWFsaXplZCgpO1xuXG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIHZvdGVMaXN0ID0gW107XG4gICAgICAgICAgICAgIGNsb3NlZExpc3QgPSBbXTtcbiAgICAgICAgICAgICAgY3VycmVudFBvbGwgPSB0aGlzLmJvdC5kYi5nZXQoJ3F1aWNrcG9sbC5wb2xsJykudmFsdWUoKTtcbiAgICAgICAgICAgICAgcG9sbENvdW50ID0gMDtcblxuICAgICAgICAgICAgICBpZiAoY3VycmVudFBvbGwub3BlbiA9PT0gdHJ1ZSAmJiBjdXJyZW50UG9sbC5jaGFubmVsSUQgPT09IG1lc3NhZ2UuY2hhbm5lbC5pZCkge1xuICAgICAgICAgICAgICAgIHZvdGVMaXN0LnB1c2goJ09wZW4gcXVpY2twb2xsOiAnICsgY3VycmVudFBvbGwucXVlc3Rpb24gKyAnXFxuJyk7XG4gICAgICAgICAgICAgICAgcG9sbENvdW50Kys7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB2b3RlTGlzdC5wdXNoKCdPcGVuIFBvbGxzOicpO1xuICAgICAgICAgICAgICB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy5tZWFzdXJlcycpLmZpbHRlcih7IGNoYW5uZWxJRDogbWVzc2FnZS5jaGFubmVsLmlkIH0pLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgICAgICB2YXIgbWVhc3VyZUlEU3RyaW5nID0gKCcwMDAnICsgbS5pZC50b1N0cmluZygzNikpLnNsaWNlKC0zKTtcbiAgICAgICAgICAgICAgICBpZiAobS5vcGVuKSB7XG4gICAgICAgICAgICAgICAgICBwb2xsQ291bnQrKztcbiAgICAgICAgICAgICAgICAgIHZvdGVMaXN0LnB1c2goJ01lYXN1cmUgJCcgKyBtZWFzdXJlSURTdHJpbmcgKyAnOiAnICsgbS50ZXh0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcG9sbENvdW50Kys7XG4gICAgICAgICAgICAgICAgICBjbG9zZWRMaXN0LnB1c2goJ01lYXN1cmUgJCcgKyBtZWFzdXJlSURTdHJpbmcgKyAnOiAnICsgbS50ZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pLnZhbHVlKCk7XG4gICAgICAgICAgICAgIGNsb3NlZFRleHQgPSBjbG9zZWRMaXN0LnNsaWNlKGNsb3NlZExpc3QubGVuZ3RoIC0gMykuam9pbignXFxuJyk7XG5cbiAgICAgICAgICAgICAgaWYgKCEocG9sbENvdW50ID4gMCkpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCdyZXR1cm4nLCB2b3RlTGlzdC5qb2luKCdcXG4nKSArICdcXG5cXG5DbG9zZWQgUG9sbHM6XFxuJyArIGNsb3NlZFRleHQpO1xuXG4gICAgICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCdyZXR1cm4nLCAnTm8gcXVpY2twb2xscyBvciBtZWFzdXJlcyBmb3VuZCBpbiB0aGlzIGNoYW5uZWwnKTtcblxuICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlLCB0aGlzKTtcbiAgICB9KSk7XG5cbiAgICBmdW5jdGlvbiBsaXN0Vm90ZXMoX3gsIF94Mikge1xuICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlzdFZvdGVzO1xuICB9KCk7XG5cbiAgVm90aW5nLnByb3RvdHlwZS5kZWxldGVWb3RlQWRtaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoX3JlZjMsIG1lc3NhZ2UpIHtcbiAgICAgIHZhciB0eXBlID0gX3JlZjNbMV0sXG4gICAgICAgICAgaWQgPSBfcmVmM1syXTtcblxuICAgICAgdmFyIF9zZWxlY3RlZFBvbGwsIHNlbGVjdGVkUG9sbDtcblxuICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHtcbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyO1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhYmFzZUluaXRpYWxpemVkKCk7XG5cbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgaWYgKCEodHlwZSA9PT0gJ3F1aWNrcG9sbCcpKSB7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgX3NlbGVjdGVkUG9sbCA9IHRoaXMuYm90LmRiLmdldCgncXVpY2twb2xsLnBvbGwnKS52YWx1ZSgpO1xuXG4gICAgICAgICAgICAgIGlmICghKF9zZWxlY3RlZFBvbGwudXNlcklEICE9PSBtZXNzYWdlLnVzZXIuaWQpKSB7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoJ3JldHVybicsIHRoaXMuZGVsZXRlVm90ZSh0eXBlLCBpZCwgbWVzc2FnZSkpO1xuXG4gICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgIHNlbGVjdGVkUG9sbCA9IHRoaXMuYm90LmRiLmdldCgndm90aW5nLm1lYXN1cmVzJykuZmlsdGVyKHsgaWQ6IHBhcnNlSW50KGlkLCAzNiksIGNoYW5uZWxJRDogbWVzc2FnZS5jaGFubmVsLmlkIH0pLmZpcnN0KCkudmFsdWUoKTtcblxuICAgICAgICAgICAgICBpZiAoIShzZWxlY3RlZFBvbGwuY2hhbm5lbElEID09PSBtZXNzYWdlLmNoYW5uZWwuaWQgJiYgc2VsZWN0ZWRQb2xsLnVzZXJJRCAhPT0gbWVzc2FnZS51c2VyLmlkKSkge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCdyZXR1cm4nLCB0aGlzLmRlbGV0ZVZvdGUodHlwZSwgaWQsIG1lc3NhZ2UpKTtcblxuICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7XG4gICAgfSkpO1xuXG4gICAgZnVuY3Rpb24gZGVsZXRlVm90ZUFkbWluKF94MywgX3g0KSB7XG4gICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVsZXRlVm90ZUFkbWluO1xuICB9KCk7XG5cbiAgVm90aW5nLnByb3RvdHlwZS5kZWxldGVWb3RlT3duZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWY0ID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoX3JlZjUsIG1lc3NhZ2UpIHtcbiAgICAgIHZhciB0eXBlID0gX3JlZjVbMV0sXG4gICAgICAgICAgaWQgPSBfcmVmNVsyXTtcblxuICAgICAgdmFyIF9zZWxQb2xsLCBzZWxQb2xsO1xuXG4gICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0Mykge1xuICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlSW5pdGlhbGl6ZWQoKTtcblxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICBpZiAoISh0eXBlID09PSAncXVpY2twb2xsJykpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDY7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBfc2VsUG9sbCA9IHRoaXMuYm90LmRiLmdldCgncXVpY2twb2xsLnBvbGwnKS52YWx1ZSgpO1xuXG4gICAgICAgICAgICAgIGlmICghKF9zZWxQb2xsLnVzZXJJRCA9PT0gbWVzc2FnZS51c2VyLmlkICYmIF9zZWxQb2xsLmNoYW5uZWxJRCA9PT0gbWVzc2FnZS5jaGFubmVsLmlkKSkge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCdyZXR1cm4nLCB0aGlzLmRlbGV0ZVZvdGUodHlwZSwgaWQsIG1lc3NhZ2UpKTtcblxuICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICBzZWxQb2xsID0gdGhpcy5ib3QuZGIuZ2V0KCd2b3RpbmcubWVhc3VyZXMnKS5maWx0ZXIoeyBpZDogcGFyc2VJbnQoaWQsIDM2KSwgY2hhbm5lbElEOiBtZXNzYWdlLmNoYW5uZWwuaWQgfSkuZmlyc3QoKS52YWx1ZSgpO1xuXG4gICAgICAgICAgICAgIGlmICghKHNlbFBvbGwuY2hhbm5lbElEID09PSBtZXNzYWdlLmNoYW5uZWwuaWQgJiYgc2VsUG9sbC51c2VySUQgPT09IG1lc3NhZ2UudXNlci5pZCkpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgncmV0dXJuJywgdGhpcy5kZWxldGVWb3RlKHR5cGUsIGlkLCBtZXNzYWdlKSk7XG5cbiAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpO1xuICAgIH0pKTtcblxuICAgIGZ1bmN0aW9uIGRlbGV0ZVZvdGVPd25lZChfeDUsIF94Nikge1xuICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlbGV0ZVZvdGVPd25lZDtcbiAgfSgpO1xuXG4gIFZvdGluZy5wcm90b3R5cGUuZGVsZXRlVm90ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3JlZjYgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCh0eXBlLCBpZCwgbWVzc2FnZSkge1xuICAgICAgdmFyIGN1cnJlbnRQb2xsLCBtZWFzdXJlSUQ7XG4gICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkge1xuICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBpZiAoISh0eXBlID09PSAncXVpY2twb2xsJykpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDY7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjdXJyZW50UG9sbCA9IHRoaXMuYm90LmRiLmdldCgncXVpY2twb2xsLnBvbGwnKS52YWx1ZSgpO1xuXG4gICAgICAgICAgICAgIGlmICghKGN1cnJlbnRQb2xsLmNoYW5uZWxJRCA9PT0gbWVzc2FnZS5jaGFubmVsLmlkKSkge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRoaXMuaW5pdFF1aWNrcG9sbCgpO1xuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgncmV0dXJuJywgJ1F1aWNrcG9sbCBoYXMgYmVlbiBkZWxldGVkLicpO1xuXG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCdyZXR1cm4nLCAnTm8gcXVpY2twb2xsIG9wZW4gaW4gdGhpcyBjaGFubmVsLicpO1xuXG4gICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgIG1lYXN1cmVJRCA9IHBhcnNlSW50KGlkLCAzNik7XG5cbiAgICAgICAgICAgICAgdGhpcy5ib3QuZGIuZ2V0KCd2b3RpbmcubWVhc3VyZXMnKS5yZW1vdmUoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbS5pZCA9PT0gbWVhc3VyZUlEO1xuICAgICAgICAgICAgICB9KS52YWx1ZSgpO1xuICAgICAgICAgICAgICB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy52b3RlcycpLnJlbW92ZShmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtLm1lYXN1cmVJRCA9PT0gbWVhc3VyZUlEO1xuICAgICAgICAgICAgICB9KS52YWx1ZSgpO1xuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgncmV0dXJuJywgJ01lYXN1cmUgJyArIGlkICsgJyBkZWxldGVkLicpO1xuXG4gICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlNCwgdGhpcyk7XG4gICAgfSkpO1xuXG4gICAgZnVuY3Rpb24gZGVsZXRlVm90ZShfeDcsIF94OCwgX3g5KSB7XG4gICAgICByZXR1cm4gX3JlZjYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGVsZXRlVm90ZTtcbiAgfSgpO1xuXG4gIFZvdGluZy5wcm90b3R5cGUuY2xvc2VWb3RlQWRtaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWY3ID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoX3JlZjgsIG1lc3NhZ2UpIHtcbiAgICAgIHZhciB0eXBlID0gX3JlZjhbMV0sXG4gICAgICAgICAgaWQgPSBfcmVmOFsyXTtcblxuICAgICAgdmFyIF9zZWxQb2xsMiwgc2VsUG9sbDtcblxuICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHtcbiAgICAgICAgd2hpbGUgKDEpIHtcbiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyO1xuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhYmFzZUluaXRpYWxpemVkKCk7XG5cbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgaWYgKCEodHlwZSA9PT0gJ3F1aWNrcG9sbCcpKSB7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA2O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgX3NlbFBvbGwyID0gdGhpcy5ib3QuZGIuZ2V0KCdxdWlja3BvbGwucG9sbCcpLnZhbHVlKCk7XG5cbiAgICAgICAgICAgICAgaWYgKCEoX3NlbFBvbGwyLnVzZXJJRCAhPT0gbWVzc2FnZS51c2VyLmlkICYmIF9zZWxQb2xsMi5jaGFubmVsSUQgPT09IG1lc3NhZ2UuY2hhbm5lbC5pZCkpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDY7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgncmV0dXJuJywgdGhpcy5jbG9zZVZvdGUodHlwZSwgaWQsIG1lc3NhZ2UpKTtcblxuICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICBzZWxQb2xsID0gdGhpcy5ib3QuZGIuZ2V0KCd2b3RpbmcubWVhc3VyZXMnKS5maWx0ZXIoeyBpZDogcGFyc2VJbnQoaWQsIDM2KSwgY2hhbm5lbElEOiBtZXNzYWdlLmNoYW5uZWwuaWQgfSkuZmlyc3QoKS52YWx1ZSgpO1xuXG4gICAgICAgICAgICAgIGlmICghKHNlbFBvbGwuY2hhbm5lbElEID09PSBtZXNzYWdlLmNoYW5uZWwuaWQgJiYgc2VsUG9sbC51c2VySUQgIT09IG1lc3NhZ2UudXNlci5pZCkpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgncmV0dXJuJywgdGhpcy5jbG9zZVZvdGUodHlwZSwgaWQsIG1lc3NhZ2UpKTtcblxuICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlNSwgdGhpcyk7XG4gICAgfSkpO1xuXG4gICAgZnVuY3Rpb24gY2xvc2VWb3RlQWRtaW4oX3gxMCwgX3gxMSkge1xuICAgICAgcmV0dXJuIF9yZWY3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsb3NlVm90ZUFkbWluO1xuICB9KCk7XG5cbiAgVm90aW5nLnByb3RvdHlwZS5jbG9zZVZvdGVPd25lZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3JlZjkgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihfcmVmMTAsIG1lc3NhZ2UpIHtcbiAgICAgIHZhciB0eXBlID0gX3JlZjEwWzFdLFxuICAgICAgICAgIGlkID0gX3JlZjEwWzJdO1xuXG4gICAgICB2YXIgX3NlbFBvbGwzLCBzZWxQb2xsO1xuXG4gICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0Nikge1xuICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDI7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlSW5pdGlhbGl6ZWQoKTtcblxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICBpZiAoISh0eXBlID09PSAncXVpY2twb2xsJykpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDY7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBfc2VsUG9sbDMgPSB0aGlzLmJvdC5kYi5nZXQoJ3F1aWNrcG9sbC5wb2xsJykudmFsdWUoKTtcblxuICAgICAgICAgICAgICBpZiAoIShfc2VsUG9sbDMudXNlcklEID09PSBtZXNzYWdlLnVzZXIuaWQgJiYgX3NlbFBvbGwzLmNoYW5uZWxJRCA9PT0gbWVzc2FnZS5jaGFubmVsLmlkKSkge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCdyZXR1cm4nLCB0aGlzLmNsb3NlVm90ZSh0eXBlLCBpZCwgbWVzc2FnZSkpO1xuXG4gICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgIHNlbFBvbGwgPSB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy5tZWFzdXJlcycpLmZpbHRlcih7IGlkOiBwYXJzZUludChpZCwgMzYpLCBjaGFubmVsSUQ6IG1lc3NhZ2UuY2hhbm5lbC5pZCB9KS5maXJzdCgpLnZhbHVlKCk7XG5cbiAgICAgICAgICAgICAgaWYgKCEoc2VsUG9sbC5jaGFubmVsSUQgPT09IG1lc3NhZ2UuY2hhbm5lbC5pZCAmJiBzZWxQb2xsLnVzZXJJRCA9PT0gbWVzc2FnZS51c2VyLmlkKSkge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gOTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCdyZXR1cm4nLCB0aGlzLmNsb3NlVm90ZSh0eXBlLCBpZCwgbWVzc2FnZSkpO1xuXG4gICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICBjYXNlICdlbmQnOlxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWU2LCB0aGlzKTtcbiAgICB9KSk7XG5cbiAgICBmdW5jdGlvbiBjbG9zZVZvdGVPd25lZChfeDEyLCBfeDEzKSB7XG4gICAgICByZXR1cm4gX3JlZjkuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xvc2VWb3RlT3duZWQ7XG4gIH0oKTtcblxuICBWb3RpbmcucHJvdG90eXBlLmNsb3NlVm90ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3JlZjExID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcodHlwZSwgaWQsIG1lc3NhZ2UpIHtcbiAgICAgIHZhciBjdXJyZW50UG9sbCwgY3VycmVudE1lYXN1cmU7XG4gICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0Nykge1xuICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBpZiAoISh0eXBlID09PSAncXVpY2twb2xsJykpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDY7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBjdXJyZW50UG9sbCA9IHRoaXMuYm90LmRiLmdldCgncXVpY2twb2xsLnBvbGwnKS52YWx1ZSgpO1xuXG4gICAgICAgICAgICAgIGlmICghKGN1cnJlbnRQb2xsLm9wZW4gPT09IHRydWUgJiYgY3VycmVudFBvbGwuY2hhbm5lbElEID09PSBtZXNzYWdlLmNoYW5uZWwuaWQpKSB7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA1O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgdGhpcy5ib3QuZGIuc2V0KCdxdWlja3BvbGwucG9sbC5vcGVuJywgZmFsc2UpLnZhbHVlKCk7XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCdyZXR1cm4nLCAnUG9sbCBcIicgKyBjdXJyZW50UG9sbC5xdWVzdGlvbiArICdcIiBoYXMgYmVlbiBjbG9zZWQuJyk7XG5cbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoJ3JldHVybicsICdObyBxdWlja3BvbGwgb3BlbiBpbiB0aGlzIGNoYW5uZWwuJyk7XG5cbiAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgY3VycmVudE1lYXN1cmUgPSB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy5tZWFzdXJlcycpLmZpbHRlcih7IGlkOiBwYXJzZUludChpZCwgMzYpLCBjaGFubmVsSUQ6IG1lc3NhZ2UuY2hhbm5lbC5pZCB9KS5maXJzdCgpLnZhbHVlKCk7XG5cbiAgICAgICAgICAgICAgaWYgKCEoY3VycmVudE1lYXN1cmUub3BlbiA9PT0gdHJ1ZSAmJiBjdXJyZW50TWVhc3VyZS5jaGFubmVsSUQgPT09IG1lc3NhZ2UuY2hhbm5lbC5pZCkpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDEwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY3VycmVudE1lYXN1cmUub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgncmV0dXJuJywgJ01lYXN1cmUgXCInICsgY3VycmVudE1lYXN1cmUudGV4dCArICdcIiBoYXMgYmVlbiBjbG9zZWQuJyk7XG5cbiAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCdyZXR1cm4nLCAnTm8gdm90ZSB3aXRoIHRoYXQgSUQgb3BlbiBpbiB0aGlzIGNoYW5uZWwnKTtcblxuICAgICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTcsIHRoaXMpO1xuICAgIH0pKTtcblxuICAgIGZ1bmN0aW9uIGNsb3NlVm90ZShfeDE0LCBfeDE1LCBfeDE2KSB7XG4gICAgICByZXR1cm4gX3JlZjExLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsb3NlVm90ZTtcbiAgfSgpO1xuXG4gIFZvdGluZy5wcm90b3R5cGUucmVzdWx0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3JlZjEyID0gX2FzeW5jVG9HZW5lcmF0b3IocmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoX3JlZjEzLCBtZXNzYWdlKSB7XG4gICAgICB2YXIgaWQgPSBfcmVmMTNbMV07XG4gICAgICB2YXIgcmVzdWx0cywgcmVzdWx0c1NvcnRlZCwgcmVzcG9uc2UsIG1lYXN1cmVOdW0sIGN1cnJlbnRNZWFzdXJlLCBjdXJyZW50UG9sbCwgaztcbiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIHJlc3VsdHMgPSB2b2lkIDA7XG4gICAgICAgICAgICAgIHJlc3VsdHNTb3J0ZWQgPSBbXTtcbiAgICAgICAgICAgICAgcmVzcG9uc2UgPSB2b2lkIDA7XG4gICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2VJbml0aWFsaXplZCgpO1xuXG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDExO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgbWVhc3VyZU51bSA9IHBhcnNlSW50KGlkLCAzNik7XG4gICAgICAgICAgICAgIGN1cnJlbnRNZWFzdXJlID0gdGhpcy5ib3QuZGIuZ2V0KCd2b3RpbmcubWVhc3VyZXMnKS5maWx0ZXIoeyBpZDogbWVhc3VyZU51bSwgY2hhbm5lbElEOiBtZXNzYWdlLmNoYW5uZWwuaWQgfSkuZmlyc3QoKS52YWx1ZSgpO1xuXG4gICAgICAgICAgICAgIGlmIChjdXJyZW50TWVhc3VyZSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdHMgPSB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy52b3RlcycpLmZpbHRlcih7IG1lYXN1cmVJRDogbWVhc3VyZU51bSwgY2hhbm5lbElEOiBtZXNzYWdlLmNoYW5uZWwuaWQgfSkuY291bnRCeShmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIG0ucmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgfSkudmFsdWUoKTtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9ICdWb3RpbmcgcmVzdWx0cyBmb3IgJCcgKyBpZCArICcgJyArIGN1cnJlbnRNZWFzdXJlLnRleHQgKyAnOlxcbic7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxNjtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICAgIGN1cnJlbnRQb2xsID0gdGhpcy5ib3QuZGIuZ2V0KCdxdWlja3BvbGwucG9sbCcpLnZhbHVlKCk7XG5cbiAgICAgICAgICAgICAgaWYgKCEoY3VycmVudFBvbGwuY2hhbm5lbElEICE9PSBtZXNzYWdlLmNoYW5uZWwuaWQpKSB7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxNDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCdyZXR1cm4nLCAnTm8gUXVpY2twb2xsIHJ1bm5pbmcgZm9yICcgKyBtZXNzYWdlLmNoYW5uZWwubmFtZSk7XG5cbiAgICAgICAgICAgIGNhc2UgMTQ6XG5cbiAgICAgICAgICAgICAgcmVzdWx0cyA9IHRoaXMuYm90LmRiLmdldCgncXVpY2twb2xsLnZvdGVzJykuZmlsdGVyKHsgY2hhbm5lbElEOiBtZXNzYWdlLmNoYW5uZWwuaWQgfSkuY291bnRCeShmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtLnJlc3BvbnNlO1xuICAgICAgICAgICAgICB9KS52YWx1ZSgpO1xuICAgICAgICAgICAgICByZXNwb25zZSA9ICdWb3RpbmcgcmVzdWx0cyBmb3IgXCInICsgY3VycmVudFBvbGwucXVlc3Rpb24gKyAnXCI6XFxuJztcblxuICAgICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgICAgaWYgKCEoT2JqZWN0LmtleXMocmVzdWx0cykubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTg7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgncmV0dXJuJywgJ05vIHZvdGVzIHlldCcpO1xuXG4gICAgICAgICAgICBjYXNlIDE4OlxuXG4gICAgICAgICAgICAgIGZvciAoayBpbiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMuaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdHNTb3J0ZWQucHVzaCh7IGtleTogaywgdmFsdWU6IHJlc3VsdHNba10gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHJlc3VsdHNTb3J0ZWQubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdHNTb3J0ZWQuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGIudmFsdWUgLSBhLnZhbHVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmVzdWx0c1NvcnRlZC5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZSArPSB2YWwua2V5ICsgJyByZWNpZXZlZCAnICsgdmFsLnZhbHVlICsgJyBwb2ludCcgKyAodmFsLnZhbHVlID09PSAxID8gJycgOiAncycpICsgJ1xcbic7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgncmV0dXJuJywgcmVzcG9uc2UpO1xuXG4gICAgICAgICAgICBjYXNlIDIyOlxuICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlOCwgdGhpcyk7XG4gICAgfSkpO1xuXG4gICAgZnVuY3Rpb24gcmVzdWx0cyhfeDE3LCBfeDE4KSB7XG4gICAgICByZXR1cm4gX3JlZjEyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH0oKTtcblxuICBWb3RpbmcucHJvdG90eXBlLmNyZWF0ZVZvdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYxNCA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KF9yZWYxNSwgbWVzc2FnZSkge1xuICAgICAgdmFyIHR5cGUgPSBfcmVmMTVbMV0sXG4gICAgICAgICAgcG9sbFRleHQgPSBfcmVmMTVbMl07XG4gICAgICB2YXIgbWVhc3VyZURldGFpbHMsIG1lYXN1cmUsIG1lYXN1cmVJRFN0cmluZywgbWVhc3VyZVRleHQsIGNob2ljZU51bTtcbiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2VJbml0aWFsaXplZCgpO1xuXG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIGlmICghKHR5cGUgPT09ICdxdWlja3BvbGwnKSkge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gNztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICghKHRoaXMuYm90LmRiLmdldCgncXVpY2twb2xsLnBvbGwub3BlbicpLnZhbHVlKCkgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gNjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHRoaXMuaW5pdFF1aWNrcG9sbCh0cnVlLCBtZXNzYWdlLmNoYW5uZWwuaWQsIG1lc3NhZ2UudXNlci5pZCwgcG9sbFRleHQpO1xuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgncmV0dXJuJywgJ1F1aWNrcG9sbCBjcmVhdGVkOiAnICsgcG9sbFRleHQgKyAnIHR5cGUgXCJ2b3RlIDx5b3VyIHZvdGU+XCIgdG8gcmVzcG9uZC4nKTtcblxuICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgncmV0dXJuJywgJ0Nhbm5vdCBjcmVhdGUgcXVpY2twb2xsLiAgUXVpY2twb2xsIGFscmVhZHkgaW4gcHJvZ3Jlc3MuJyk7XG5cbiAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgbWVhc3VyZURldGFpbHMgPSBwb2xsVGV4dC5zcGxpdCgnfCcpO1xuICAgICAgICAgICAgICBtZWFzdXJlID0ge1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmdldE5leHRNZWFzdXJlSUQoKSxcbiAgICAgICAgICAgICAgICB0ZXh0OiBtZWFzdXJlRGV0YWlsc1swXSxcbiAgICAgICAgICAgICAgICBjaG9pY2VzOiBtZWFzdXJlRGV0YWlscy5zbGljZSgxKSxcbiAgICAgICAgICAgICAgICBhbGxvd090aGVyOiBtZWFzdXJlRGV0YWlscy5pbmNsdWRlcygnb3RoZXInKSxcbiAgICAgICAgICAgICAgICBvcGVuOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDAsXG4gICAgICAgICAgICAgICAgY2hhbm5lbElEOiBtZXNzYWdlLmNoYW5uZWwuaWQsXG4gICAgICAgICAgICAgICAgdXNlcklEOiBtZXNzYWdlLnVzZXIuaWRcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgbWVhc3VyZUlEU3RyaW5nID0gKCcwMDAnICsgbWVhc3VyZS5pZC50b1N0cmluZygzNikpLnNsaWNlKC0zKTtcblxuICAgICAgICAgICAgICB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy5tZWFzdXJlcycpLnB1c2gobWVhc3VyZSkudmFsdWUoKTtcbiAgICAgICAgICAgICAgbWVhc3VyZVRleHQgPSAnTWVhc3VyZSBjcmVhdGVkOiAnICsgbWVhc3VyZS50ZXh0ICsgJyBDaG9pY2VzOlxcbic7XG4gICAgICAgICAgICAgIGNob2ljZU51bSA9IDA7XG5cbiAgICAgICAgICAgICAgbWVhc3VyZS5jaG9pY2VzLmZvckVhY2goZnVuY3Rpb24gKGNob2ljZSkge1xuICAgICAgICAgICAgICAgIGlmIChjaG9pY2UgIT09ICdvdGhlcicpIHtcbiAgICAgICAgICAgICAgICAgIG1lYXN1cmVUZXh0ICs9ICsrY2hvaWNlTnVtICsgJy5cXHQnICsgY2hvaWNlICsgJ1xcbic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgbWVhc3VyZVRleHQgKz0gJ1R5cGUgXCJ2b3RlICQnICsgbWVhc3VyZUlEU3RyaW5nICsgJyAxLScgKyBjaG9pY2VOdW0gKyAnXCInO1xuICAgICAgICAgICAgICBtZWFzdXJlVGV4dCArPSAnJyArIChtZWFzdXJlLmFsbG93T3RoZXIgPyAnIG9yIFwidm90ZSAkJyArIG1lYXN1cmVJRFN0cmluZyArICcgPHlvdXIgdm90ZT5cIiAnIDogJyAnKTtcbiAgICAgICAgICAgICAgbWVhc3VyZVRleHQgKz0gJ3RvIHBsYWNlIHlvdXIgdm90ZS4nO1xuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgncmV0dXJuJywgbWVhc3VyZVRleHQpO1xuXG4gICAgICAgICAgICBjYXNlIDE4OlxuICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBfY2FsbGVlOSwgdGhpcyk7XG4gICAgfSkpO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlVm90ZShfeDE5LCBfeDIwKSB7XG4gICAgICByZXR1cm4gX3JlZjE0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNyZWF0ZVZvdGU7XG4gIH0oKTtcblxuICBWb3RpbmcucHJvdG90eXBlLnZvdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYxNiA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMChfcmVmMTcsIG1lc3NhZ2UpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICB2YXIgbWF0Y2ggPSBfcmVmMTdbMF0sXG4gICAgICAgICAgaWQgPSBfcmVmMTdbMV0sXG4gICAgICAgICAgdm90ZVRleHQgPSBfcmVmMTdbMl07XG5cbiAgICAgIHZhciByZXNwb25zZU51bSwgbWVhc3VyZU51bSwgcmVzcG9uc2VUZXh0LCBjdXJyZW50TWVhc3VyZSwgbWF4Q2hvaWNlLCBfdm90ZSwgY3VycmVudFBvbGwsIF92b3RlMiwgX3JldDIsIF9jdXJyZW50UG9sbDtcblxuICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkge1xuICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDI7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGFiYXNlSW5pdGlhbGl6ZWQoKTtcblxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICBpZiAoIShpZCAmJiB2b3RlVGV4dCkpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyOTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vVm90ZUlEIGFuZCBWb3RlIHByZXNlbnRcbiAgICAgICAgICAgICAgcmVzcG9uc2VOdW0gPSBwYXJzZUludCh2b3RlVGV4dCkgLSAxO1xuICAgICAgICAgICAgICBtZWFzdXJlTnVtID0gcGFyc2VJbnQoaWQsIDM2KTtcbiAgICAgICAgICAgICAgcmVzcG9uc2VUZXh0ID0gdm9pZCAwO1xuICAgICAgICAgICAgICBjdXJyZW50TWVhc3VyZSA9IHRoaXMuYm90LmRiLmdldCgndm90aW5nLm1lYXN1cmVzJykuZmlsdGVyKHsgaWQ6IG1lYXN1cmVOdW0sIG9wZW46IHRydWUsIGNoYW5uZWxJRDogbWVzc2FnZS5jaGFubmVsLmlkIH0pLmZpcnN0KCkudmFsdWUoKTtcblxuICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRNZWFzdXJlKSB7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjY7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBtYXhDaG9pY2UgPSBjdXJyZW50TWVhc3VyZS5jaG9pY2VzLmxlbmd0aCAtIChjdXJyZW50TWVhc3VyZS5hbGxvd090aGVyID8gMiA6IDEpO1xuXG4gICAgICAgICAgICAgIGlmIChpc05hTihyZXNwb25zZU51bSkpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAxNztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlTnVtID49IDAgJiYgcmVzcG9uc2VOdW0gPD0gbWF4Q2hvaWNlKSkge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDE0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmVzcG9uc2VUZXh0ID0gY3VycmVudE1lYXN1cmUuY2hvaWNlc1tyZXNwb25zZU51bV07XG4gICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDE1O1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCdyZXR1cm4nLCAnSW52YWlkIHZvdGUgb3B0aW9uICcgKyB2b3RlVGV4dCk7XG5cbiAgICAgICAgICAgIGNhc2UgMTU6XG4gICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDIyO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAxNzpcbiAgICAgICAgICAgICAgaWYgKCFjdXJyZW50TWVhc3VyZS5hbGxvd090aGVyKSB7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXNwb25zZVRleHQgPSB2b3RlVGV4dDtcbiAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjI7XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDIxOlxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoJ3JldHVybicsICdJbnZhbGlkIHZvdGUgb3B0aW9uICcgKyB2b3RlVGV4dCk7XG5cbiAgICAgICAgICAgIGNhc2UgMjI6XG4gICAgICAgICAgICAgIF92b3RlID0gdGhpcy5idWlsZFZvdGUoZmFsc2UsIG1lYXN1cmVOdW0sIHJlc3BvbnNlVGV4dCwgbWVzc2FnZS51c2VyLmlkLCBtZXNzYWdlLmNoYW5uZWwuaWQpO1xuXG4gICAgICAgICAgICAgIHRoaXMuYm90LmRiLmdldCgndm90aW5nLnZvdGVzJykucHVzaChfdm90ZSkudmFsdWUoKTtcbiAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjc7XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDI2OlxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoJ3JldHVybicsICdObyB2b3RlIHdpdGggdGhhdCBJRCBvcGVuIGluIHRoaXMgY2hhbm5lbCcpO1xuXG4gICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA0MjtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMjk6XG4gICAgICAgICAgICAgIGlmICghdm90ZVRleHQpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAzNDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vUXVpY2twb2xsIHZvdGUgcHJlc2VudFxuICAgICAgICAgICAgICBjdXJyZW50UG9sbCA9IHRoaXMuYm90LmRiLmdldCgncXVpY2twb2xsLnBvbGwnKS52YWx1ZSgpO1xuXG4gICAgICAgICAgICAgIGlmIChjdXJyZW50UG9sbC5vcGVuID09PSB0cnVlICYmIGN1cnJlbnRQb2xsLmNoYW5uZWxJRCA9PT0gbWVzc2FnZS5jaGFubmVsLmlkKSB7XG4gICAgICAgICAgICAgICAgX3ZvdGUyID0gdGhpcy5idWlsZFZvdGUodHJ1ZSwgJycsIHZvdGVUZXh0LCBtZXNzYWdlLnVzZXIuaWQsIG1lc3NhZ2UuY2hhbm5lbC5pZCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmJvdC5kYi5nZXQoJ3F1aWNrcG9sbC52b3RlcycpLnB1c2goX3ZvdGUyKS52YWx1ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDQyO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAzNDpcbiAgICAgICAgICAgICAgaWYgKCFpZCkge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0MTAubmV4dCA9IDM4O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgX3JldDIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRNZWFzdXJlID0gX3RoaXMyLmJvdC5kYi5nZXQoJ3ZvdGluZy5tZWFzdXJlcycpLmZpbHRlcih7IGlkOiBwYXJzZUludChpZCwgMzYpLCBvcGVuOiB0cnVlLCBjaGFubmVsSUQ6IG1lc3NhZ2UuY2hhbm5lbC5pZCB9KS5maXJzdCgpLnZhbHVlKCk7XG4gICAgICAgICAgICAgICAgdmFyIG1lYXN1cmVJRFN0cmluZyA9ICgnMDAwJyArIGN1cnJlbnRNZWFzdXJlLmlkLnRvU3RyaW5nKDM2KSkuc2xpY2UoLTMpO1xuICAgICAgICAgICAgICAgIHZhciBtZWFzdXJlVGV4dCA9ICdNZWFzdXJlOiAnICsgY3VycmVudE1lYXN1cmUudGV4dCArICcgQ2hvaWNlczpcXG4nO1xuICAgICAgICAgICAgICAgIHZhciBjaG9pY2VOdW0gPSAxO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRNZWFzdXJlLmNob2ljZXMuZm9yRWFjaChmdW5jdGlvbiAoY2hvaWNlKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoY2hvaWNlICE9PSAnb3RoZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVUZXh0ICs9IGNob2ljZU51bSsrICsgJy5cXHQnICsgY2hvaWNlICsgJ1xcbic7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbWVhc3VyZVRleHQgKz0gJ1R5cGUgXCJ2b3RlICQnICsgbWVhc3VyZUlEU3RyaW5nICsgJyAxLScgKyAoY2hvaWNlTnVtIC0gMSkgKyAnXCJcIic7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNZWFzdXJlLmFsbG93T3RoZXIpIHtcbiAgICAgICAgICAgICAgICAgIG1lYXN1cmVUZXh0ICs9ICcgb3IgXCJ2b3RlICQnICsgbWVhc3VyZUlEU3RyaW5nICsgJyA8eW91ciB2b3RlPlwiJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWVhc3VyZVRleHQgKz0gJyB0byBwbGFjZSB5b3VyIHZvdGUuJztcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgdjogbWVhc3VyZVRleHRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9KCk7XG5cbiAgICAgICAgICAgICAgaWYgKCEoKHR5cGVvZiBfcmV0MiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldDIpKSA9PT0gXCJvYmplY3RcIikpIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAzODtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgncmV0dXJuJywgX3JldDIudik7XG5cbiAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgIF9jdXJyZW50UG9sbCA9IHRoaXMuYm90LmRiLmdldCgncXVpY2twb2xsLnBvbGwnKS52YWx1ZSgpO1xuXG4gICAgICAgICAgICAgIGlmICghKF9jdXJyZW50UG9sbC5jaGFubmVsSUQgIT09IG1lc3NhZ2UuY2hhbm5lbC5pZCB8fCAhX2N1cnJlbnRQb2xsLm9wZW4pKSB7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNDE7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoJ3JldHVybicsICdObyBRdWlja3BvbGwgcnVubmluZyBmb3IgJyArIG1lc3NhZ2UuY2hhbm5lbC5uYW1lKTtcblxuICAgICAgICAgICAgY2FzZSA0MTpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCdyZXR1cm4nLCAnUXVpY2twb2xsOiAnICsgX2N1cnJlbnRQb2xsLnF1ZXN0aW9uICsgJyB0eXBlIFwidm90ZSB5b3VyIHJlc3BvbnNlXCIgdG8gcmVzcG9uZC4nKTtcblxuICAgICAgICAgICAgY2FzZSA0MjpcbiAgICAgICAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUxMCwgdGhpcyk7XG4gICAgfSkpO1xuXG4gICAgZnVuY3Rpb24gdm90ZShfeDIxLCBfeDIyKSB7XG4gICAgICByZXR1cm4gX3JlZjE2LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZvdGU7XG4gIH0oKTtcblxuICBWb3RpbmcucHJvdG90eXBlLmJ1aWxkVm90ZSA9IGZ1bmN0aW9uIGJ1aWxkVm90ZShxdWlja3BvbGwsIG1lYXN1cmUsIHJlc3BvbnNlVGV4dCwgdXNlcklELCBjaGFubmVsKSB7XG4gICAgaWYgKHF1aWNrcG9sbCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlVGV4dCxcbiAgICAgICAgdXNlcjogdXNlcklELFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIGNoYW5uZWxJRDogY2hhbm5lbFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIG1lYXN1cmVJRDogbWVhc3VyZSxcbiAgICAgIHJlc3BvbnNlOiByZXNwb25zZVRleHQsXG4gICAgICB1c2VyOiB1c2VySUQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBjaGFubmVsSUQ6IGNoYW5uZWxcbiAgICB9O1xuICB9O1xuXG4gIFZvdGluZy5wcm90b3R5cGUuZ2V0TmV4dE1lYXN1cmVJRCA9IGZ1bmN0aW9uIGdldE5leHRNZWFzdXJlSUQoKSB7XG4gICAgdmFyIGhpZ2hNZWFzdXJlID0gdGhpcy5ib3QuZGIuZ2V0KCd2b3RpbmcubWVhc3VyZXMnKS5tYXhCeSgnaWQnKS52YWx1ZSgpO1xuICAgIGlmIChoaWdoTWVhc3VyZSkge1xuICAgICAgcmV0dXJuIGhpZ2hNZWFzdXJlLmlkICsgMTtcbiAgICB9XG5cbiAgICByZXR1cm4gMTtcbiAgfTtcblxuICBWb3RpbmcucHJvdG90eXBlLmluaXRWb3RpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYxOCA9IF9hc3luY1RvR2VuZXJhdG9yKHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMSgpIHtcbiAgICAgIHZhciB2b3RlTGlzdCwgbWVhc3VyZUxpc3Q7XG4gICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2VJbml0aWFsaXplZCgpO1xuXG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIHRoaXMuYm90LmRiLmdldCgndm90aW5nJykudmFsdWUoKTtcbiAgICAgICAgICAgICAgdm90ZUxpc3QgPSB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy52b3RlcycpLmZpcnN0KCkudmFsdWUoKTtcbiAgICAgICAgICAgICAgbWVhc3VyZUxpc3QgPSB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy5tZWFzdXJlcycpLmZpcnN0KCkudmFsdWUoKTtcblxuICAgICAgICAgICAgICBpZiAodHlwZW9mIHZvdGVMaXN0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuYm90LmRiLnNldCgndm90aW5nLnZvdGVzJywgW10pLnZhbHVlKCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lYXN1cmVMaXN0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuYm90LmRiLnNldCgndm90aW5nLm1lYXN1cmVzJywgW10pLnZhbHVlKCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTExLCB0aGlzKTtcbiAgICB9KSk7XG5cbiAgICBmdW5jdGlvbiBpbml0Vm90aW5nKCkge1xuICAgICAgcmV0dXJuIF9yZWYxOC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIHJldHVybiBpbml0Vm90aW5nO1xuICB9KCk7XG5cbiAgVm90aW5nLnByb3RvdHlwZS5pbml0UXVpY2twb2xsID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcmVmMTkgPSBfYXN5bmNUb0dlbmVyYXRvcihyZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIocG9sbFN0YXRlLCBjaGFubmVsLCB1c2VyLCBxdWVzdGlvbnRleHQsIHBvbGx0aW1lb3V0KSB7XG4gICAgICB2YXIgcG9sbE9wdGlvbnM7XG4gICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7XG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMjtcbiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YWJhc2VJbml0aWFsaXplZCgpO1xuXG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgIHBvbGxPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIG9wZW46IHBvbGxTdGF0ZSB8fCBmYWxzZSxcbiAgICAgICAgICAgICAgICBjaGFubmVsSUQ6IGNoYW5uZWwgfHwgJycsXG4gICAgICAgICAgICAgICAgcXVlc3Rpb246IHF1ZXN0aW9udGV4dCB8fCAnJyxcbiAgICAgICAgICAgICAgICB0aW1lb3V0OiBwb2xsdGltZW91dCB8fCAwLFxuICAgICAgICAgICAgICAgIHVzZXJJRDogdXNlciB8fCAnJ1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIHRoaXMuYm90LmRiLnNldCgncXVpY2twb2xsLnBvbGwnLCBwb2xsT3B0aW9ucykudmFsdWUoKTtcbiAgICAgICAgICAgICAgdGhpcy5ib3QuZGIuc2V0KCdxdWlja3BvbGwudm90ZXMnLCBbXSkudmFsdWUoKTtcblxuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgX2NhbGxlZTEyLCB0aGlzKTtcbiAgICB9KSk7XG5cbiAgICBmdW5jdGlvbiBpbml0UXVpY2twb2xsKF94MjMsIF94MjQsIF94MjUsIF94MjYsIF94MjcpIHtcbiAgICAgIHJldHVybiBfcmVmMTkuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5pdFF1aWNrcG9sbDtcbiAgfSgpO1xuXG4gIHJldHVybiBWb3Rpbmc7XG59KF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fZXhvcGxheV9leG9ib3RfX1tcIkNoYXRQbHVnaW5cIl0pLCAoX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCAnbGlzdFZvdGVzJywgW19kZWMsIF9kZWMyLCBfZGVjM10sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgJ2xpc3RWb3RlcycpLCBfY2xhc3MucHJvdG90eXBlKSwgX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCAnZGVsZXRlVm90ZUFkbWluJywgW19kZWM0LCBfZGVjNSwgX2RlYzZdLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsICdkZWxldGVWb3RlQWRtaW4nKSwgX2NsYXNzLnByb3RvdHlwZSksIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgJ2RlbGV0ZVZvdGVPd25lZCcsIFtfZGVjNywgX2RlYzgsIF9kZWM5XSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCAnZGVsZXRlVm90ZU93bmVkJyksIF9jbGFzcy5wcm90b3R5cGUpLCBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsICdjbG9zZVZvdGVBZG1pbicsIFtfZGVjMTAsIF9kZWMxMSwgX2RlYzEyXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCAnY2xvc2VWb3RlQWRtaW4nKSwgX2NsYXNzLnByb3RvdHlwZSksIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgJ2Nsb3NlVm90ZU93bmVkJywgW19kZWMxMywgX2RlYzE0LCBfZGVjMTVdLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsICdjbG9zZVZvdGVPd25lZCcpLCBfY2xhc3MucHJvdG90eXBlKSwgX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCAncmVzdWx0cycsIFtfZGVjMTYsIF9kZWMxNywgX2RlYzE4XSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCAncmVzdWx0cycpLCBfY2xhc3MucHJvdG90eXBlKSwgX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCAnY3JlYXRlVm90ZScsIFtfZGVjMTksIF9kZWMyMCwgX2RlYzIxXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCAnY3JlYXRlVm90ZScpLCBfY2xhc3MucHJvdG90eXBlKSwgX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCAndm90ZScsIFtfZGVjMjIsIF9kZWMyM10sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgJ3ZvdGUnKSwgX2NsYXNzLnByb3RvdHlwZSkpLCBfY2xhc3MpKTtcblxuLyoqKi8gfVxuLyoqKioqKi8gXSkpKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gdm90aW5nLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vcnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcbiBcdF9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTtcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9yeSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0fSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDkyNWNlMzE1ODYyNTQxMDEzNWQ1IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiQGV4b3BsYXkvZXhvYm90XCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiQGV4b3BsYXkvZXhvYm90XCJcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHsgQ2hhdFBsdWdpbiwgbGlzdGVuLCByZXNwb25kLCBoZWxwLCBwZXJtaXNzaW9uR3JvdXAgfSBmcm9tICdAZXhvcGxheS9leG9ib3QnO1xuXG5leHBvcnQgY2xhc3MgVm90aW5nIGV4dGVuZHMgQ2hhdFBsdWdpbiB7XG4gIG5hbWUgPSAndm90aW5nJztcblxuICBkZWZhdWx0RGF0YWJhc2UgPSB7XG4gICAgcXVpY2twb2xsOiB7IHZvdGVzOiBbXSwgcG9sbDoge1xuICAgICAgb3BlbjogZmFsc2UsXG4gICAgICBjaGFubmVsSUQ6ICcnLFxuICAgICAgcXVlc3Rpb246ICcnLFxuICAgICAgdGltZW91dDogMCxcbiAgICAgIHVzZXJJRDogJycsXG4gICAgfSB9LFxuICAgIHZvdGluZzogeyB2b3RlczogW10sIG1lYXN1cmVzOiBbXSB9LFxuICB9O1xuXG4gIF9yZXF1aXJlc0RhdGFiYXNlID0gdHJ1ZTtcblxuICBwcm9wVHlwZXMgPSB7fTtcblxuICBAcGVybWlzc2lvbkdyb3VwKCdwdWJsaWMnKTtcbiAgQGhlbHAoJ1ZvdGVzIGxpc3QgLSBMaXN0cyBhbGwgdm90ZXMgdGhhdCBhcmUgb3BlbiBpbiBjaGFubmVsIGFuZCAzIHJlY2VudCBjbG9zZWQgdm90ZXMnKTtcbiAgQHJlc3BvbmQoL152b3RlcyBsaXN0L2kpO1xuICBhc3luYyBsaXN0Vm90ZXMobWF0Y2gsIG1lc3NhZ2UpIHtcbiAgICBhd2FpdCB0aGlzLmRhdGFiYXNlSW5pdGlhbGl6ZWQoKTtcbiAgICBjb25zdCB2b3RlTGlzdCA9IFtdO1xuICAgIGNvbnN0IGNsb3NlZExpc3QgPSBbXTtcbiAgICBjb25zdCBjdXJyZW50UG9sbCA9IHRoaXMuYm90LmRiLmdldCgncXVpY2twb2xsLnBvbGwnKS52YWx1ZSgpO1xuICAgIGxldCBwb2xsQ291bnQgPSAwO1xuICAgIGlmIChjdXJyZW50UG9sbC5vcGVuID09PSB0cnVlICYmIGN1cnJlbnRQb2xsLmNoYW5uZWxJRCA9PT0gbWVzc2FnZS5jaGFubmVsLmlkKSB7XG4gICAgICB2b3RlTGlzdC5wdXNoKGBPcGVuIHF1aWNrcG9sbDogJHtjdXJyZW50UG9sbC5xdWVzdGlvbn1cXG5gKTtcbiAgICAgIHBvbGxDb3VudCsrO1xuICAgIH1cblxuICAgIHZvdGVMaXN0LnB1c2goJ09wZW4gUG9sbHM6Jyk7XG4gICAgdGhpcy5ib3QuZGIuZ2V0KCd2b3RpbmcubWVhc3VyZXMnKVxuICAgICAgLmZpbHRlcih7Y2hhbm5lbElEOiBtZXNzYWdlLmNoYW5uZWwuaWR9KVxuICAgICAgLmZvckVhY2goKG0pID0+IHtcbiAgICAgICAgY29uc3QgbWVhc3VyZUlEU3RyaW5nID0gYDAwMCR7bS5pZC50b1N0cmluZygzNil9YC5zbGljZSgtMyk7XG4gICAgICAgIGlmIChtLm9wZW4pIHtcbiAgICAgICAgICBwb2xsQ291bnQrKztcbiAgICAgICAgICB2b3RlTGlzdC5wdXNoKGBNZWFzdXJlICQke21lYXN1cmVJRFN0cmluZ306ICR7bS50ZXh0fWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBvbGxDb3VudCsrO1xuICAgICAgICAgIGNsb3NlZExpc3QucHVzaChgTWVhc3VyZSAkJHttZWFzdXJlSURTdHJpbmd9OiAke20udGV4dH1gKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC52YWx1ZSgpO1xuICAgIGNvbnN0IGNsb3NlZFRleHQgPSBjbG9zZWRMaXN0LnNsaWNlKGNsb3NlZExpc3QubGVuZ3RoLTMpXG4gICAgICAuam9pbignXFxuJyk7XG4gICAgaWYgKHBvbGxDb3VudCA+IDApIHtcbiAgICAgIHJldHVybiBgJHt2b3RlTGlzdC5qb2luKCdcXG4nKX1cXG5cXG5DbG9zZWQgUG9sbHM6XFxuJHtjbG9zZWRUZXh0fWA7XG4gICAgfVxuXG4gICAgcmV0dXJuICdObyBxdWlja3BvbGxzIG9yIG1lYXN1cmVzIGZvdW5kIGluIHRoaXMgY2hhbm5lbCc7XG4gIH1cblxuICBAcGVybWlzc2lvbkdyb3VwKCdtYW5hZ2VWb3RlcycpO1xuICBAaGVscCgnVm90ZXMgZGVsZXRlIHF1aWNrcG9sbCAtIENsb3NlcyBvcGVuIHF1aWNrcG9sbCBpbiBjaGFubmVsXFxuJyArXG4gICAgICAgICdWb3RlcyBkZWxldGUgbWVhc3VyZSAkaWQgLSBDbG9zZXMgbWVhc3VyZSAkaWQgaW4gY2hhbm5lbCcpO1xuICBAcmVzcG9uZCgvXnZvdGVzIGRlbGV0ZVxccysocXVpY2twb2xsfG1lYXN1cmUpXFxzKig/OlxcJChcXHd7M30pKT8vaSk7XG4gIGFzeW5jIGRlbGV0ZVZvdGVBZG1pbihbLCB0eXBlLCBpZF0sIG1lc3NhZ2UpIHtcbiAgICBhd2FpdCB0aGlzLmRhdGFiYXNlSW5pdGlhbGl6ZWQoKTtcbiAgICBpZiAodHlwZSA9PT0gJ3F1aWNrcG9sbCcpIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkUG9sbCA9IHRoaXMuYm90LmRiLmdldCgncXVpY2twb2xsLnBvbGwnKS52YWx1ZSgpO1xuICAgICAgaWYgKHNlbGVjdGVkUG9sbC51c2VySUQgIT09IG1lc3NhZ2UudXNlci5pZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWxldGVWb3RlKHR5cGUsIGlkLCBtZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3RlZFBvbGwgPSB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy5tZWFzdXJlcycpXG4gICAgICAuZmlsdGVyKHtpZDogcGFyc2VJbnQoaWQsIDM2KSwgY2hhbm5lbElEOiBtZXNzYWdlLmNoYW5uZWwuaWR9KVxuICAgICAgLmZpcnN0KClcbiAgICAgIC52YWx1ZSgpO1xuICAgIGlmIChzZWxlY3RlZFBvbGwuY2hhbm5lbElEID09PSBtZXNzYWdlLmNoYW5uZWwuaWQgJiYgc2VsZWN0ZWRQb2xsLnVzZXJJRCAhPT0gbWVzc2FnZS51c2VyLmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5kZWxldGVWb3RlKHR5cGUsIGlkLCBtZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBAcGVybWlzc2lvbkdyb3VwKCdwdWJsaWMnKTtcbiAgQGhlbHAoJ1ZvdGVzIGRlbGV0ZSBxdWlja3BvbGwgLSBDbG9zZXMgb3BlbiBxdWlja3BvbGwgaW4gY2hhbm5lbFxcbicgK1xuICAgICAgICAnVm90ZXMgZGVsZXRlIG1lYXN1cmUgJGlkIC0gQ2xvc2VzIG1lYXN1cmUgJGlkIGluIGNoYW5uZWwnKTtcbiAgQHJlc3BvbmQoL152b3RlcyBkZWxldGVcXHMrKHF1aWNrcG9sbHxtZWFzdXJlKVxccyooPzpcXCQoXFx3ezN9KSk/L2kpO1xuICBhc3luYyBkZWxldGVWb3RlT3duZWQoWywgdHlwZSwgaWRdLCBtZXNzYWdlKSB7XG4gICAgYXdhaXQgdGhpcy5kYXRhYmFzZUluaXRpYWxpemVkKCk7XG4gICAgaWYgKHR5cGUgPT09ICdxdWlja3BvbGwnKSB7XG4gICAgICBjb25zdCBzZWxQb2xsID0gdGhpcy5ib3QuZGIuZ2V0KCdxdWlja3BvbGwucG9sbCcpLnZhbHVlKCk7XG4gICAgICBpZiAoc2VsUG9sbC51c2VySUQgPT09IG1lc3NhZ2UudXNlci5pZCAmJiBzZWxQb2xsLmNoYW5uZWxJRCA9PT0gbWVzc2FnZS5jaGFubmVsLmlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlbGV0ZVZvdGUodHlwZSwgaWQsIG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNlbFBvbGwgPSB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy5tZWFzdXJlcycpXG4gICAgICAuZmlsdGVyKHtpZDogcGFyc2VJbnQoaWQsIDM2KSwgY2hhbm5lbElEOiBtZXNzYWdlLmNoYW5uZWwuaWR9KVxuICAgICAgLmZpcnN0KClcbiAgICAgIC52YWx1ZSgpO1xuICAgIGlmIChzZWxQb2xsLmNoYW5uZWxJRCA9PT0gbWVzc2FnZS5jaGFubmVsLmlkICYmIHNlbFBvbGwudXNlcklEID09PSBtZXNzYWdlLnVzZXIuaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRlbGV0ZVZvdGUodHlwZSwgaWQsIG1lc3NhZ2UpO1xuICAgIH1cblxuICB9XG5cbiAgYXN5bmMgZGVsZXRlVm90ZSh0eXBlLCBpZCwgbWVzc2FnZSkge1xuICAgIGlmICh0eXBlID09PSAncXVpY2twb2xsJykge1xuICAgICAgY29uc3QgY3VycmVudFBvbGwgPSB0aGlzLmJvdC5kYi5nZXQoJ3F1aWNrcG9sbC5wb2xsJykudmFsdWUoKTtcbiAgICAgIGlmIChjdXJyZW50UG9sbC5jaGFubmVsSUQgPT09IG1lc3NhZ2UuY2hhbm5lbC5pZCkge1xuICAgICAgICB0aGlzLmluaXRRdWlja3BvbGwoKTtcbiAgICAgICAgcmV0dXJuICdRdWlja3BvbGwgaGFzIGJlZW4gZGVsZXRlZC4nO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJ05vIHF1aWNrcG9sbCBvcGVuIGluIHRoaXMgY2hhbm5lbC4nO1xuICAgIH1cblxuICAgIGNvbnN0IG1lYXN1cmVJRCA9IHBhcnNlSW50KGlkLCAzNik7XG4gICAgdGhpcy5ib3QuZGIuZ2V0KCd2b3RpbmcubWVhc3VyZXMnKVxuICAgICAgLnJlbW92ZShtID0+IG0uaWQgPT09IG1lYXN1cmVJRClcbiAgICAgIC52YWx1ZSgpO1xuICAgIHRoaXMuYm90LmRiLmdldCgndm90aW5nLnZvdGVzJylcbiAgICAgIC5yZW1vdmUobSA9PiBtLm1lYXN1cmVJRCA9PT0gbWVhc3VyZUlEKVxuICAgICAgLnZhbHVlKCk7XG4gICAgcmV0dXJuIGBNZWFzdXJlICR7aWR9IGRlbGV0ZWQuYDtcbiAgfVxuXG4gIEBwZXJtaXNzaW9uR3JvdXAoJ21hbmFnZVZvdGVzJyk7XG4gIEBoZWxwKCdWb3RlcyBjbG9zZSBxdWlja3BvbGwgLSBDbG9zZXMgb3BlbiBxdWlja3BvbGwgaW4gY2hhbm5lbFxcbicgK1xuICAgICAgICAnVm90ZXMgY2xvc2UgbWVhc3VyZSAkaWQgLSBDbG9zZXMgbWVhc3VyZSAkaWQgaW4gY2hhbm5lbCcpO1xuICBAcmVzcG9uZCgvXnZvdGVzIGNsb3NlXFxzKyhxdWlja3BvbGx8bWVhc3VyZSlcXHMqKD86XFwkKFxcd3szfSkpPy9pKTtcbiAgYXN5bmMgY2xvc2VWb3RlQWRtaW4oWywgdHlwZSwgaWRdLCBtZXNzYWdlKSB7XG4gICAgYXdhaXQgdGhpcy5kYXRhYmFzZUluaXRpYWxpemVkKCk7XG4gICAgaWYgKHR5cGUgPT09ICdxdWlja3BvbGwnKSB7XG4gICAgICBjb25zdCBzZWxQb2xsID0gdGhpcy5ib3QuZGIuZ2V0KCdxdWlja3BvbGwucG9sbCcpLnZhbHVlKCk7XG4gICAgICBpZiAoc2VsUG9sbC51c2VySUQgIT09IG1lc3NhZ2UudXNlci5pZCAmJiBzZWxQb2xsLmNoYW5uZWxJRCA9PT0gbWVzc2FnZS5jaGFubmVsLmlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlVm90ZSh0eXBlLCBpZCwgbWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2VsUG9sbCA9IHRoaXMuYm90LmRiLmdldCgndm90aW5nLm1lYXN1cmVzJylcbiAgICAgIC5maWx0ZXIoe2lkOiBwYXJzZUludChpZCwgMzYpLCBjaGFubmVsSUQ6IG1lc3NhZ2UuY2hhbm5lbC5pZH0pXG4gICAgICAuZmlyc3QoKVxuICAgICAgLnZhbHVlKCk7XG4gICAgaWYgKHNlbFBvbGwuY2hhbm5lbElEID09PSBtZXNzYWdlLmNoYW5uZWwuaWQgJiYgc2VsUG9sbC51c2VySUQgIT09IG1lc3NhZ2UudXNlci5pZCkge1xuICAgICAgcmV0dXJuIHRoaXMuY2xvc2VWb3RlKHR5cGUsIGlkLCBtZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBAcGVybWlzc2lvbkdyb3VwKCdwdWJsaWMnKTtcbiAgQGhlbHAoJ1ZvdGVzIGNsb3NlIHF1aWNrcG9sbCAtIENsb3NlcyBvcGVuIHF1aWNrcG9sbCBpbiBjaGFubmVsXFxuJyArXG4gICAgICAgICdWb3RlcyBjbG9zZSBtZWFzdXJlICRpZCAtIENsb3NlcyBtZWFzdXJlICRpZCBpbiBjaGFubmVsJyk7XG4gIEByZXNwb25kKC9edm90ZXMgY2xvc2VcXHMrKHF1aWNrcG9sbHxtZWFzdXJlKVxccyooPzpcXCQoXFx3ezN9KSk/L2kpO1xuICBhc3luYyBjbG9zZVZvdGVPd25lZChbLHR5cGUsIGlkXSwgbWVzc2FnZSkge1xuICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VJbml0aWFsaXplZCgpO1xuICAgIGlmICh0eXBlID09PSAncXVpY2twb2xsJykge1xuICAgICAgY29uc3Qgc2VsUG9sbCA9IHRoaXMuYm90LmRiLmdldCgncXVpY2twb2xsLnBvbGwnKS52YWx1ZSgpO1xuICAgICAgaWYgKHNlbFBvbGwudXNlcklEID09PSBtZXNzYWdlLnVzZXIuaWQgJiYgc2VsUG9sbC5jaGFubmVsSUQgPT09IG1lc3NhZ2UuY2hhbm5lbC5pZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZVZvdGUodHlwZSwgaWQsIG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNlbFBvbGwgPSB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy5tZWFzdXJlcycpXG4gICAgICAuZmlsdGVyKHtpZDogcGFyc2VJbnQoaWQsIDM2KSwgY2hhbm5lbElEOiBtZXNzYWdlLmNoYW5uZWwuaWR9KVxuICAgICAgLmZpcnN0KClcbiAgICAgIC52YWx1ZSgpO1xuICAgIGlmIChzZWxQb2xsLmNoYW5uZWxJRCA9PT0gbWVzc2FnZS5jaGFubmVsLmlkICYmIHNlbFBvbGwudXNlcklEID09PSBtZXNzYWdlLnVzZXIuaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNsb3NlVm90ZSh0eXBlLCBpZCwgbWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY2xvc2VWb3RlKHR5cGUsIGlkLCBtZXNzYWdlKSB7XG4gICAgaWYgKHR5cGUgPT09ICdxdWlja3BvbGwnKSB7XG4gICAgICBjb25zdCBjdXJyZW50UG9sbCA9IHRoaXMuYm90LmRiLmdldCgncXVpY2twb2xsLnBvbGwnKS52YWx1ZSgpO1xuICAgICAgaWYgKGN1cnJlbnRQb2xsLm9wZW4gPT09IHRydWUgJiYgY3VycmVudFBvbGwuY2hhbm5lbElEID09PSBtZXNzYWdlLmNoYW5uZWwuaWQpIHtcbiAgICAgICAgdGhpcy5ib3QuZGIuc2V0KCdxdWlja3BvbGwucG9sbC5vcGVuJywgZmFsc2UpLnZhbHVlKCk7XG4gICAgICAgIHJldHVybiBgUG9sbCBcIiR7Y3VycmVudFBvbGwucXVlc3Rpb259XCIgaGFzIGJlZW4gY2xvc2VkLmA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAnTm8gcXVpY2twb2xsIG9wZW4gaW4gdGhpcyBjaGFubmVsLic7XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudE1lYXN1cmUgPSB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy5tZWFzdXJlcycpXG4gICAgICAuZmlsdGVyKHtpZDogcGFyc2VJbnQoaWQsIDM2KSwgY2hhbm5lbElEOiBtZXNzYWdlLmNoYW5uZWwuaWR9KVxuICAgICAgLmZpcnN0KClcbiAgICAgIC52YWx1ZSgpO1xuICAgIGlmIChjdXJyZW50TWVhc3VyZS5vcGVuID09PSB0cnVlICYmIGN1cnJlbnRNZWFzdXJlLmNoYW5uZWxJRCA9PT0gbWVzc2FnZS5jaGFubmVsLmlkKSB7XG4gICAgICBjdXJyZW50TWVhc3VyZS5vcGVuID0gZmFsc2U7XG4gICAgICByZXR1cm4gYE1lYXN1cmUgXCIke2N1cnJlbnRNZWFzdXJlLnRleHR9XCIgaGFzIGJlZW4gY2xvc2VkLmA7XG4gICAgfVxuXG4gICAgcmV0dXJuICdObyB2b3RlIHdpdGggdGhhdCBJRCBvcGVuIGluIHRoaXMgY2hhbm5lbCc7XG4gIH1cblxuICBAcGVybWlzc2lvbkdyb3VwKCdwdWJsaWMnKTtcbiAgQGhlbHAoJ1ZvdGVzIHJlc3VsdHMgWyRpZF0gLSBPdXRwdXRzIHRoZSByZXN1bHRzIG9mIHF1aWNrcG9sbCBvciBtZWFzdXJlIHdpdGggb3B0aW9uYWwgJGlkJyk7XG4gIEByZXNwb25kKC9edm90ZXMgcmVzdWx0c1xccyooPzpcXCQoXFx3ezN9KSk/L2kpO1xuICBhc3luYyByZXN1bHRzIChbLCBpZF0sIG1lc3NhZ2UpIHtcbiAgICBsZXQgcmVzdWx0cztcbiAgICBjb25zdCByZXN1bHRzU29ydGVkID0gW107XG4gICAgbGV0IHJlc3BvbnNlO1xuICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VJbml0aWFsaXplZCgpO1xuICAgIGlmIChpZCkge1xuICAgICAgY29uc3QgbWVhc3VyZU51bSA9IHBhcnNlSW50KGlkLCAzNik7XG4gICAgICBjb25zdCBjdXJyZW50TWVhc3VyZSA9IHRoaXMuYm90LmRiLmdldCgndm90aW5nLm1lYXN1cmVzJylcbiAgICAgICAgLmZpbHRlcih7aWQ6IG1lYXN1cmVOdW0sIGNoYW5uZWxJRDogbWVzc2FnZS5jaGFubmVsLmlkfSlcbiAgICAgICAgLmZpcnN0KClcbiAgICAgICAgLnZhbHVlKCk7XG4gICAgICBpZiAoY3VycmVudE1lYXN1cmUpIHtcbiAgICAgICAgcmVzdWx0cyA9IHRoaXMuYm90LmRiLmdldCgndm90aW5nLnZvdGVzJylcbiAgICAgICAgICAuZmlsdGVyKHttZWFzdXJlSUQ6IG1lYXN1cmVOdW0sIGNoYW5uZWxJRDogbWVzc2FnZS5jaGFubmVsLmlkfSlcbiAgICAgICAgICAuY291bnRCeSgobSkgPT4gbS5yZXNwb25zZSlcbiAgICAgICAgICAudmFsdWUoKTtcbiAgICAgICAgcmVzcG9uc2UgPSBgVm90aW5nIHJlc3VsdHMgZm9yICQke2lkfSAke2N1cnJlbnRNZWFzdXJlLnRleHR9OlxcbmA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRQb2xsID0gdGhpcy5ib3QuZGIuZ2V0KCdxdWlja3BvbGwucG9sbCcpLnZhbHVlKCk7XG4gICAgICBpZiAoY3VycmVudFBvbGwuY2hhbm5lbElEICE9PSBtZXNzYWdlLmNoYW5uZWwuaWQpIHtcbiAgICAgICAgcmV0dXJuIGBObyBRdWlja3BvbGwgcnVubmluZyBmb3IgJHttZXNzYWdlLmNoYW5uZWwubmFtZX1gO1xuICAgICAgfVxuXG4gICAgICByZXN1bHRzID0gdGhpcy5ib3QuZGIuZ2V0KCdxdWlja3BvbGwudm90ZXMnKVxuICAgICAgICAuZmlsdGVyKHtjaGFubmVsSUQ6IG1lc3NhZ2UuY2hhbm5lbC5pZH0pXG4gICAgICAgIC5jb3VudEJ5KChtKSA9PiBtLnJlc3BvbnNlKVxuICAgICAgLnZhbHVlKCk7XG4gICAgICByZXNwb25zZSA9IGBWb3RpbmcgcmVzdWx0cyBmb3IgXCIke2N1cnJlbnRQb2xsLnF1ZXN0aW9ufVwiOlxcbmA7XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKHJlc3VsdHMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuICdObyB2b3RlcyB5ZXQnO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgayBpbiByZXN1bHRzKSB7XG4gICAgICBpZiAocmVzdWx0cy5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICByZXN1bHRzU29ydGVkLnB1c2goe2tleTprLCB2YWx1ZTpyZXN1bHRzW2tdfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdHNTb3J0ZWQubGVuZ3RoID4gMSkge1xuICAgICAgcmVzdWx0c1NvcnRlZC5zb3J0KChhLGIpID0+IGIudmFsdWUtYS52YWx1ZSk7XG4gICAgfVxuXG4gICAgcmVzdWx0c1NvcnRlZC5mb3JFYWNoKCh2YWwpID0+IHtcbiAgICAgIHJlc3BvbnNlICs9IGAke3ZhbC5rZXl9IHJlY2lldmVkICR7dmFsLnZhbHVlfSBwb2ludCR7dmFsLnZhbHVlID09PSAxID8gJyc6J3MnfVxcbmA7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cbiAgQHBlcm1pc3Npb25Hcm91cCgnY3JlYXRlVm90ZXMnKTtcbiAgQGhlbHAoJ1ZvdGVzIGNyZWF0ZSBxdWlja3BvbGwgXCJZb3VyIHF1ZXN0aW9uXCIgLSBDcmVhdGVzIHF1aWNrcG9sbCBpbiBjaGFubmVsXFxuJyArXG4gICAgICAgICdWb3RlcyBjcmVhdGUgbWVhc3VyZSBcIllvdXIgUXVlc3Rpb25cInxcIk9wdGlvbiAxXCJ8XCJPcHRpb24gMlwifFtvdGhlcl0gLSAnICtcbiAgICAgICAgJ0NyZWF0ZXMgbWVhc3VyZSBpbiBjaGFubmVsIHdpdGggb3B0aW9ucyBhbmQgb3B0aW9uYWwgb3RoZXIgZW50cnlcXG4nKTtcbiAgQHJlc3BvbmQoL152b3RlcyBjcmVhdGVcXHMrKHF1aWNrcG9sbHxtZWFzdXJlKVxccysoLispL2kpO1xuICBhc3luYyBjcmVhdGVWb3RlKFssIHR5cGUsIHBvbGxUZXh0XSwgbWVzc2FnZSkge1xuICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VJbml0aWFsaXplZCgpO1xuICAgIGlmICh0eXBlID09PSAncXVpY2twb2xsJykge1xuICAgICAgaWYgKHRoaXMuYm90LmRiLmdldCgncXVpY2twb2xsLnBvbGwub3BlbicpLnZhbHVlKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuaW5pdFF1aWNrcG9sbCh0cnVlLCBtZXNzYWdlLmNoYW5uZWwuaWQsIG1lc3NhZ2UudXNlci5pZCwgcG9sbFRleHQpO1xuICAgICAgICByZXR1cm4gYFF1aWNrcG9sbCBjcmVhdGVkOiAke3BvbGxUZXh0fSB0eXBlIFwidm90ZSA8eW91ciB2b3RlPlwiIHRvIHJlc3BvbmQuYDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICdDYW5ub3QgY3JlYXRlIHF1aWNrcG9sbC4gIFF1aWNrcG9sbCBhbHJlYWR5IGluIHByb2dyZXNzLic7XG4gICAgfVxuXG4gICAgY29uc3QgbWVhc3VyZURldGFpbHMgPSBwb2xsVGV4dC5zcGxpdCgnfCcpO1xuICAgIGNvbnN0IG1lYXN1cmUgPSB7XG4gICAgICBpZDogdGhpcy5nZXROZXh0TWVhc3VyZUlEKCksXG4gICAgICB0ZXh0OiBtZWFzdXJlRGV0YWlsc1swXSxcbiAgICAgIGNob2ljZXM6IG1lYXN1cmVEZXRhaWxzLnNsaWNlKDEpLFxuICAgICAgYWxsb3dPdGhlcjogbWVhc3VyZURldGFpbHMuaW5jbHVkZXMoJ290aGVyJyksXG4gICAgICBvcGVuOiB0cnVlLFxuICAgICAgdGltZW91dDogMCxcbiAgICAgIGNoYW5uZWxJRDogbWVzc2FnZS5jaGFubmVsLmlkLFxuICAgICAgdXNlcklEOiBtZXNzYWdlLnVzZXIuaWQsXG4gICAgfTtcbiAgICBjb25zdCBtZWFzdXJlSURTdHJpbmcgPSBgMDAwJHttZWFzdXJlLmlkLnRvU3RyaW5nKDM2KX1gLnNsaWNlKC0zKTtcbiAgICB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy5tZWFzdXJlcycpXG4gICAgICAucHVzaChtZWFzdXJlKVxuICAgICAgLnZhbHVlKCk7XG4gICAgbGV0IG1lYXN1cmVUZXh0ID0gYE1lYXN1cmUgY3JlYXRlZDogJHttZWFzdXJlLnRleHR9IENob2ljZXM6XFxuYDtcbiAgICBsZXQgY2hvaWNlTnVtID0gMDtcbiAgICBtZWFzdXJlLmNob2ljZXMuZm9yRWFjaCgoY2hvaWNlKSA9PiB7XG4gICAgICBpZiAoY2hvaWNlICE9PSAnb3RoZXInKSB7XG4gICAgICAgIG1lYXN1cmVUZXh0ICs9IGAkeysrY2hvaWNlTnVtfS5cXHQke2Nob2ljZX1cXG5gO1xuICAgICAgfVxuICAgIH0pO1xuICAgIG1lYXN1cmVUZXh0ICs9IGBUeXBlIFwidm90ZSAkJHttZWFzdXJlSURTdHJpbmd9IDEtJHtjaG9pY2VOdW19XCJgO1xuICAgIG1lYXN1cmVUZXh0ICs9IGAke21lYXN1cmUuYWxsb3dPdGhlciA/IGAgb3IgXCJ2b3RlICQke21lYXN1cmVJRFN0cmluZ30gPHlvdXIgdm90ZT5cIiBgIDogJyAnfWA7XG4gICAgbWVhc3VyZVRleHQgKz0gJ3RvIHBsYWNlIHlvdXIgdm90ZS4nO1xuICAgIHJldHVybiBtZWFzdXJlVGV4dDtcbiAgfVxuXG4gIEBwZXJtaXNzaW9uR3JvdXAoJ3B1YmxpYycpO1xuICBAbGlzdGVuKC9edm90ZVtec11cXHMqKD86XFwkKFxcd3szfSlcXHMqKT8oW15cXCRdezF9LiopPy9pKTtcbiAgYXN5bmMgdm90ZShbbWF0Y2gsIGlkLCB2b3RlVGV4dF0sIG1lc3NhZ2UpIHtcbiAgICBhd2FpdCB0aGlzLmRhdGFiYXNlSW5pdGlhbGl6ZWQoKTtcbiAgICBpZiAoaWQgJiYgdm90ZVRleHQpIHsgIC8vVm90ZUlEIGFuZCBWb3RlIHByZXNlbnRcbiAgICAgIGNvbnN0IHJlc3BvbnNlTnVtID0gcGFyc2VJbnQodm90ZVRleHQpLTE7XG4gICAgICBjb25zdCBtZWFzdXJlTnVtID0gcGFyc2VJbnQoaWQsIDM2KTtcbiAgICAgIGxldCByZXNwb25zZVRleHQ7XG4gICAgICBjb25zdCBjdXJyZW50TWVhc3VyZSA9IHRoaXMuYm90LmRiLmdldCgndm90aW5nLm1lYXN1cmVzJylcbiAgICAgICAgLmZpbHRlcih7aWQ6IG1lYXN1cmVOdW0sIG9wZW46IHRydWUsIGNoYW5uZWxJRDogbWVzc2FnZS5jaGFubmVsLmlkfSlcbiAgICAgICAgLmZpcnN0KClcbiAgICAgICAgLnZhbHVlKCk7XG4gICAgICBpZiAoY3VycmVudE1lYXN1cmUpIHtcbiAgICAgICAgY29uc3QgbWF4Q2hvaWNlID0gY3VycmVudE1lYXN1cmUuY2hvaWNlcy5sZW5ndGggLSAoY3VycmVudE1lYXN1cmUuYWxsb3dPdGhlciA/IDIgOiAxKTtcbiAgICAgICAgaWYgKCFpc05hTihyZXNwb25zZU51bSkpIHtcbiAgICAgICAgICBpZiAocmVzcG9uc2VOdW0gPj0gMCAmJiByZXNwb25zZU51bSA8PSBtYXhDaG9pY2UpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlVGV4dCA9IGN1cnJlbnRNZWFzdXJlLmNob2ljZXNbcmVzcG9uc2VOdW1dO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYEludmFpZCB2b3RlIG9wdGlvbiAke3ZvdGVUZXh0fWA7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRNZWFzdXJlLmFsbG93T3RoZXIpIHtcbiAgICAgICAgICByZXNwb25zZVRleHQgPSB2b3RlVGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gYEludmFsaWQgdm90ZSBvcHRpb24gJHt2b3RlVGV4dH1gO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgdm90ZSA9IHRoaXMuYnVpbGRWb3RlKGZhbHNlLFxuICAgICAgICAgIG1lYXN1cmVOdW0sXG4gICAgICAgICAgcmVzcG9uc2VUZXh0LFxuICAgICAgICAgIG1lc3NhZ2UudXNlci5pZCxcbiAgICAgICAgICBtZXNzYWdlLmNoYW5uZWwuaWQpO1xuICAgICAgICB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy52b3RlcycpXG4gICAgICAgICAgLnB1c2godm90ZSlcbiAgICAgICAgICAudmFsdWUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAnTm8gdm90ZSB3aXRoIHRoYXQgSUQgb3BlbiBpbiB0aGlzIGNoYW5uZWwnO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodm90ZVRleHQpIHsgIC8vUXVpY2twb2xsIHZvdGUgcHJlc2VudFxuICAgICAgY29uc3QgY3VycmVudFBvbGwgPSB0aGlzLmJvdC5kYi5nZXQoJ3F1aWNrcG9sbC5wb2xsJykudmFsdWUoKTtcbiAgICAgIGlmIChjdXJyZW50UG9sbC5vcGVuID09PSB0cnVlICYmIGN1cnJlbnRQb2xsLmNoYW5uZWxJRCA9PT0gbWVzc2FnZS5jaGFubmVsLmlkKSB7XG4gICAgICAgIGNvbnN0IHZvdGUgPSB0aGlzLmJ1aWxkVm90ZSh0cnVlLCAnJywgdm90ZVRleHQsIG1lc3NhZ2UudXNlci5pZCwgbWVzc2FnZS5jaGFubmVsLmlkKTtcbiAgICAgICAgdGhpcy5ib3QuZGIuZ2V0KCdxdWlja3BvbGwudm90ZXMnKVxuICAgICAgICAgIC5wdXNoKHZvdGUpXG4gICAgICAgICAgLnZhbHVlKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHsgIC8vTm8gdm90ZSBwcmVzZW50XG4gICAgICBpZiAoaWQpIHtcbiAgICAgICAgY29uc3QgY3VycmVudE1lYXN1cmUgPSB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy5tZWFzdXJlcycpXG4gICAgICAgICAgLmZpbHRlcih7aWQ6IHBhcnNlSW50KGlkLCAzNiksIG9wZW46IHRydWUsIGNoYW5uZWxJRDogbWVzc2FnZS5jaGFubmVsLmlkfSlcbiAgICAgICAgICAuZmlyc3QoKVxuICAgICAgICAgIC52YWx1ZSgpO1xuICAgICAgICBjb25zdCBtZWFzdXJlSURTdHJpbmcgPSBgMDAwJHtjdXJyZW50TWVhc3VyZS5pZC50b1N0cmluZygzNil9YC5zbGljZSgtMyk7XG4gICAgICAgIGxldCBtZWFzdXJlVGV4dCA9IGBNZWFzdXJlOiAke2N1cnJlbnRNZWFzdXJlLnRleHR9IENob2ljZXM6XFxuYDtcbiAgICAgICAgbGV0IGNob2ljZU51bSA9IDE7XG4gICAgICAgIGN1cnJlbnRNZWFzdXJlLmNob2ljZXMuZm9yRWFjaCgoY2hvaWNlKSA9PiB7XG4gICAgICAgICAgaWYgKGNob2ljZSAhPT0gJ290aGVyJykge1xuICAgICAgICAgICAgbWVhc3VyZVRleHQgKz0gYCR7Y2hvaWNlTnVtKyt9LlxcdCR7Y2hvaWNlfVxcbmA7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbWVhc3VyZVRleHQgKz0gYFR5cGUgXCJ2b3RlICQke21lYXN1cmVJRFN0cmluZ30gMS0ke2Nob2ljZU51bSAtIDF9XCJcImA7XG4gICAgICAgIGlmIChjdXJyZW50TWVhc3VyZS5hbGxvd090aGVyKSB7XG4gICAgICAgICAgbWVhc3VyZVRleHQgKz0gYCBvciBcInZvdGUgJCR7bWVhc3VyZUlEU3RyaW5nfSA8eW91ciB2b3RlPlwiYDtcbiAgICAgICAgfVxuICAgICAgICBtZWFzdXJlVGV4dCArPSAnIHRvIHBsYWNlIHlvdXIgdm90ZS4nO1xuICAgICAgICByZXR1cm4gbWVhc3VyZVRleHQ7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGN1cnJlbnRQb2xsID0gdGhpcy5ib3QuZGIuZ2V0KCdxdWlja3BvbGwucG9sbCcpLnZhbHVlKCk7XG4gICAgICBpZiAoY3VycmVudFBvbGwuY2hhbm5lbElEICE9PSBtZXNzYWdlLmNoYW5uZWwuaWQgfHwgIWN1cnJlbnRQb2xsLm9wZW4pIHtcbiAgICAgICAgcmV0dXJuIGBObyBRdWlja3BvbGwgcnVubmluZyBmb3IgJHttZXNzYWdlLmNoYW5uZWwubmFtZX1gO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYFF1aWNrcG9sbDogJHtjdXJyZW50UG9sbC5xdWVzdGlvbn0gdHlwZSBcInZvdGUgeW91ciByZXNwb25zZVwiIHRvIHJlc3BvbmQuYDtcbiAgICB9XG4gIH1cblxuICBidWlsZFZvdGUgKHF1aWNrcG9sbCwgbWVhc3VyZSwgcmVzcG9uc2VUZXh0LCB1c2VySUQsIGNoYW5uZWwpIHtcbiAgICBpZiAocXVpY2twb2xsKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXNwb25zZTogcmVzcG9uc2VUZXh0LFxuICAgICAgICB1c2VyOiB1c2VySUQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgY2hhbm5lbElEOiBjaGFubmVsLFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIG1lYXN1cmVJRDogbWVhc3VyZSxcbiAgICAgIHJlc3BvbnNlOiByZXNwb25zZVRleHQsXG4gICAgICB1c2VyOiB1c2VySUQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBjaGFubmVsSUQ6IGNoYW5uZWwsXG4gICAgfTtcblxuICB9XG5cbiAgZ2V0TmV4dE1lYXN1cmVJRCgpIHtcbiAgICBjb25zdCBoaWdoTWVhc3VyZSA9IHRoaXMuYm90LmRiLmdldCgndm90aW5nLm1lYXN1cmVzJylcbiAgICAgIC5tYXhCeSgnaWQnKVxuICAgICAgLnZhbHVlKCk7XG4gICAgaWYgKGhpZ2hNZWFzdXJlKSB7XG4gICAgICByZXR1cm4gaGlnaE1lYXN1cmUuaWQgKyAxO1xuICAgIH1cblxuICAgIHJldHVybiAxO1xuICB9XG5cbiAgYXN5bmMgaW5pdFZvdGluZygpIHtcbiAgICBhd2FpdCB0aGlzLmRhdGFiYXNlSW5pdGlhbGl6ZWQoKTtcbiAgICB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZycpLnZhbHVlKCk7XG4gICAgY29uc3Qgdm90ZUxpc3QgPSB0aGlzLmJvdC5kYi5nZXQoJ3ZvdGluZy52b3RlcycpXG4gICAgICAgICAgICAgIC5maXJzdCgpXG4gICAgICAgICAgICAgIC52YWx1ZSgpO1xuICAgIGNvbnN0IG1lYXN1cmVMaXN0ID0gdGhpcy5ib3QuZGIuZ2V0KCd2b3RpbmcubWVhc3VyZXMnKVxuICAgICAgICAgICAgICAuZmlyc3QoKVxuICAgICAgICAgICAgICAudmFsdWUoKTtcbiAgICBpZiAodHlwZW9mIHZvdGVMaXN0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5ib3QuZGIuc2V0KCd2b3Rpbmcudm90ZXMnLCBbXSlcbiAgICAgIC52YWx1ZSgpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbWVhc3VyZUxpc3QgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmJvdC5kYi5zZXQoJ3ZvdGluZy5tZWFzdXJlcycsIFtdKVxuICAgICAgLnZhbHVlKCk7XG4gICAgfVxuXG4gIH1cblxuICBhc3luYyBpbml0UXVpY2twb2xsKHBvbGxTdGF0ZSwgY2hhbm5lbCwgdXNlciwgcXVlc3Rpb250ZXh0LCBwb2xsdGltZW91dCkge1xuICAgIGF3YWl0IHRoaXMuZGF0YWJhc2VJbml0aWFsaXplZCgpO1xuICAgIGNvbnN0IHBvbGxPcHRpb25zID0ge1xuICAgICAgb3BlbjogcG9sbFN0YXRlIHx8IGZhbHNlLFxuICAgICAgY2hhbm5lbElEOiBjaGFubmVsIHx8ICcnLFxuICAgICAgcXVlc3Rpb246IHF1ZXN0aW9udGV4dCB8fCAnJyxcbiAgICAgIHRpbWVvdXQ6IHBvbGx0aW1lb3V0IHx8IDAsXG4gICAgICB1c2VySUQ6IHVzZXIgfHwgJycsXG4gICAgfTtcbiAgICB0aGlzLmJvdC5kYi5zZXQoJ3F1aWNrcG9sbC5wb2xsJyxwb2xsT3B0aW9ucykudmFsdWUoKTtcbiAgICB0aGlzLmJvdC5kYi5zZXQoJ3F1aWNrcG9sbC52b3RlcycsIFtdKVxuICAgICAgLnZhbHVlKCk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3ZvdGluZy5qcyJdLCJzb3VyY2VSb290IjoiIn0=